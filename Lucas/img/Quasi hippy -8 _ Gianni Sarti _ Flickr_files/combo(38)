YUI.add("autosuggest-data-manager",function(e){function i(e){return e.trim().split(/\s+/)}function t(i){var t=i.replace(/[\W,_]/g,"").toLowerCase();return e.fluid.removeDiacritics(t)}function r(e){var i,t,r="",n=e.split("");for(t=0,i=n.length;t<i-1;t++)r+=n[t]+"[\\W,_]*";return r+=n[i-1]}var n;(n=e.AutosuggestDataManager=function(e){(e=e||{}).prefixTrie?this.prefixTrie=e.prefixTrie:this._buildPrefixTrie(e.items)}).locateQuery=function(e,n){var s,u,f,o,c,l,a,h=[],d={};if(!e||!n)return[];for(a=0,u=(s=i(e)).length;a<u;a++)d[f=t(s[a])]||(o=r(f),(c=new RegExp("(\\b|_)("+o+")","i").exec(n))&&(l=c.index+c[1].length,h.push({start:l,end:l+c[2].length})),d[f]=!0);return h},n.deserialize=function(e){return new n({prefixTrie:JSON.parse(e)})},n.prototype={add:function(e){function r(n){var l,a,h,d,g,p,T,x,m,y,_;for(l=0,a=n.length;l<a;l++){if(h=n[l],g=[],h.title&&(g=g.concat(i(h.title))),h.subtitle&&(g=g.concat(i(h.subtitle))),h.aliases)for(_=0,d=h.aliases.length;_<d;_++)g=g.concat(i(h.aliases[_]));for(_=0,p=g.length;_<p;_++)for(T=g[_],x=o.prefixTrie,m=t(T).split("");y=m.shift();)x.children[y]=x.children[y]||o._newTrieNode(),(x=x.children[y]).itemKeys[h.key]||(x.items.push(h),x.itemKeys[h.key]=!0)}u<s&&(f=s>u+c?u+c:s,n=e.slice(u,f),u=f,setTimeout(function(){r(n)},0))}var n,s,u,f,o=this,c=250;u=0,s=e.length,f=s>u+c?u+c:s,n=e.slice(u,f),u=f,r(n)},query:function(e){var r,n,s,u,f,o=this;return e?(i(e).every(function(e){if(r=o.prefixTrie,!(n=t(e).split("")).length)return!0;for(;r&&(f=n.shift());)r=r.children[f];return r&&0===n.length?(s=r.items.slice(),!(u=u?o._intersectMatches(u,s):s)||0!==u.length):(u=[],!1)}),u||[]):[]},serialize:function(){return JSON.stringify(this.prefixTrie)},_buildPrefixTrie:function(e){this.prefixTrie=this._newTrieNode(),e&&this.add(e)},_newTrieNode:function(){return{items:[],itemKeys:{},children:{}}},_intersectMatches:function(e,i){return e.filter(function(e){return i.some(function(i){return i.key===e.key})})}}},"@VERSION@",{requires:[],optionalRequires:["fluid"]});YUI.add("search-autosuggest-items-list-view",function(e,t){var s=require("hermes-core/flog")(t),a=[{key:"photos",headerTemplate:{titleIntlKey:"search.PHOTOS",searchLink:{textIntlKey:"search.SEARCH_PHOTOS",searchType:e.SearchUrl.searchTypes.PHOTOS,rapidType:"searchPhotos",iconClass:"icon-photos"}}},{key:"people",headerTemplate:{titleIntlKey:"search.PEOPLE",searchLink:{textIntlKey:"search.SEARCH_PEOPLE",searchType:e.SearchUrl.searchTypes.PEOPLE,rapidType:"searchPeople",iconClass:"icon-people"}}},{key:"groups",headerTemplate:{titleIntlKey:"search.GROUPS",searchLink:{textIntlKey:"search.SEARCH_GROUPS",searchType:e.SearchUrl.searchTypes.GROUPS,rapidType:"searchGroups",iconClass:"icon-groups"}}},{key:"pages"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("autosuggestItems",t.autosuggestItems||{}),this.set("searchUrl",new e.SearchUrl(this.appContext.getLocation().href,this.appContext)),this.set("searchQuery",""),this},loadState:function(){var e=this.appContext.getViewer().signedIn?this.appContext.getViewer().nsid+"_user":"global_global",t=this;return this.appContext.getModel("autosuggest-context-results-models",{id:e}).then(function(e){e&&(t.processTimeout=setTimeout(function(){t.processAutosuggestModels(e)},1e3))},function(t){s.warn("error loading autosuggest data",{modelId:e})})},processAutosuggestModels:function(t){var s={};t&&t.getValue("pages").length&&(s.pages=new e.AutosuggestDataManager({items:t.getValue("pages")})),t&&t.getValue("people").length&&(s.people=new e.AutosuggestDataManager({items:t.getValue("people")})),t&&t.getValue("groups").length&&(s.groups=new e.AutosuggestDataManager({items:t.getValue("groups")})),this.set("autosuggestDataManagers",s)},updateAutosuggestItems:function(e){var t,s=this.get("autosuggestDataManagers"),a={};t=function(e,t){return e.score&&t.score?t.score-e.score:0},e&&s&&(s.pages&&(a.pages=s.pages.query(e).sort(t)),s.people&&(a.people=s.people.query(e).sort(t)),s.groups&&(a.groups=s.groups.query(e).sort(t))),this.set("autosuggestItems",a||{}),this.set("searchQuery",e||""),this.set("previouslySelectedNode",null),this.buildContainer()},buildContainer:function(){return this.assembleAutosuggestItemsList(),this.setContainerWithTemplate("search-autosuggest-items-list",{autosuggestItems:this.get("autosuggestItemsList")}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("blur",this.handleAutosuggestListItemBlur.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("click",this.handleAutosuggestListItemClick.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("mouseenter",this.handleAutosuggestListItemHoverOn.bind(this),".autosuggest-selectable-item")),this.registerEventHandler(e.delegate("keydown",this.handleAutosuggestListItemKeydown.bind(this),".autosuggest-selectable-item")),this},onParentViewEvent:function(e,t){switch(t&&t.length&&t[0]){case"update-autosuggest-items":this.updateAutosuggestItems(t[1],t[2]);break;case"enable-autosuggest":this.get("container").removeClass("disabled");break;case"disable-autosuggest":this.get("container").addClass("disabled");break;case"autosuggest-keyboard-nav":t[1]&&this.doKeyboardNav(t[1],!0)}},assembleAutosuggestItemsList:function(){var e,t,s,i=[],r=this.get("autosuggestItems")||{},o=this.get("searchQuery")||"";if(o)for(t=0;t<a.length;t++)if(e=a[t],r.hasOwnProperty(e.key)&&r[e.key].length)for(i.push(this.buildSectionHeaderItem(e.headerTemplate,o,!0)),s=0;s<Math.min(3,r[e.key].length);s++)i.push(this.buildAutosuggestListItem(r[e.key][s],e.key,o));else e.headerTemplate&&i.push(this.buildSectionHeaderItem(e.headerTemplate,o,!1));i.length?(i[0].selected=!0,this.fire("subviewViewEvent","autosuggest-has-items")):this.fire("subviewViewEvent","autosuggest-no-items"),this.set("autosuggestItemsList",i)},buildSectionHeaderItem:function(e,t,s){var a={header:!0};return e?(a.iconClass="icon-search",e.searchLink&&(a.subtitle=this.intlMessage({intlName:e.searchLink.textIntlKey}),a.url=this.get("searchUrl").clone().createNewSearch(t).setSearchType(e.searchLink.searchType).getURL(),a.iconClass=e.searchLink.iconClass,a.rapidType=e.searchLink.rapidType)):a.empty=!0,a},buildAutosuggestListItem:function(t,s,a){var i,r,o={item:!0};return o.title=t.title||"",o.subtitle=t.subtitle||"",o.rapidType=s,o.titleHighlights=e.AutosuggestDataManager.locateQuery(a,o.title),o.subtitleHighlights=e.AutosuggestDataManager.locateQuery(a,o.subtitle),"pages"===s?(o.url=t.url||"",o.iconClass="icon-docs"):(i="groups"===s?"groups":"photos",(r=t.pathalias||t.nsid)&&(o.url="/"+i+"/"+r),t.nsid&&(t.iconserver||0===t.iconserver)&&(o.avatar={type:"groups"===s?"group":"person",title:o.title,url:e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver),personNsid:"people"===s&&t.nsid,groupNsid:"groups"===s&&t.nsid})),o},handleAutosuggestListItemBlur:function(t){var s,a=this;setTimeout(function(){(s=e.one(e.config.doc.activeElement)).hasClass("autosuggest-selectable-item")||a.fire("subviewViewEvent","autosuggest-lost-all-focus")},25)},handleAutosuggestListItemClick:function(e){this.navigateFromAutosuggestListNode(e.currentTarget)},handleAutosuggestListItemKeydown:function(t){var s="";if(t.halt(),!0===t.altKey)e.fire("transfer-to-gn-search",s);else if(t.keyCode>=48&&t.keyCode<=90)s=String.fromCharCode(t.keyCode),s=!0===t.shiftKey?s.toUpperCase():s.toLowerCase(),e.fire("transfer-to-gn-search",s);else switch(t.keyCode){case 8:this.fire("subviewViewEvent","backspace-focus");break;case 13:this.navigateFromAutosuggestListNode(t.target);break;case 27:this.blurAllAutosuggestListNodes();break;case 38:this.doKeyboardNav("up",!1);break;case 40:this.doKeyboardNav("down",!1)}},navigateFromAutosuggestListNode:function(t){var s,a,i;t&&(s=t.getData("href"),a=t.getData("title"),i=t.getData("track")),a&&this.fire("subviewViewEvent","autosuggest-update-field",a),s&&(e.rapidTracker.beacon(this.name,i),this.updateAutosuggestItems(),this.appContext.flapp.navigate(s))},blurAllAutosuggestListNodes:function(){var e=this.get("container").all(".autosuggest-selectable-item");(e?e.size():0)&&e.each(function(e){e.blur()})},doKeyboardNav:function(e,t){var s,a=this.get("container").all(".autosuggest-selectable-item"),i=a?a.size():0,r=-1;i&&((s=this.get("container").one(".autosuggest-selectable-item.selected"))&&(r=a.indexOf(s)),a.removeClass("selected"),(r="up"===e?r-1:r+1)>=0&&r<i?((s=a.item(r)).addClass("selected"),s.focus()):t?(r=r<0?i-1:0,(s=a.item(r)).addClass("selected"),s.focus()):this.fire("subviewViewEvent","focus-search-field"))},handleAutosuggestListItemHoverOn:function(e){var t=this.get("container").one(".autosuggest-selectable-item.selected"),s=e.target;t&&t.removeClass("selected"),s.addClass("selected"),s.focus()},destructor:function(){this.processTimeout&&clearTimeout(this.processTimeout)}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-items-list","hermes-template-search-autosuggest-list-item","autosuggest-data-manager","search-url","url-helper"],langBundles:["search"]});YUI.add("hermes-lang-search",function(e,o){e.Intl.add("hermes/search","en-US",{RELEVANT:["Relevant"],RECENT:["Recent"],INTERESTING:["Interesting"],NAME:["Name"],ACTIVITY:["Activity"],SIZE:["Size"],OLDEST:["Oldest"],NEWEST:["Newest"],DEFAULT_SEARCH:['This is where you search Flickr. Here\'s a search for <span class="default-search">',"${query}","</span> to get you started!"],FLICKR_SEARCH:["Flickr Search"],NO_MATCHES_FOR_QUERY_TERM:["Oops! There are no matches for “","${searchTerm}","”."],NO_MATCHES_FOR_QUERY_TERM_WITH_SETTINGS:["Oops! There are no matches for “","${searchTerm}","” with your selected settings."],NO_MATCHES_FOR_QUERY:["Oops! There are no matches for your search."],TRY_DIFFERENT:["Please try refining your search."],TRY_DIFFERENT_BROADER:["Please try broadening your search."],SEARCH_ERROR:["Oops! The date you entered does not exist."],SEARCH_START:["Start your search"],SEARCHING:["Searching"],FETCHING_PHOTOS:["Fetching more photos..."],SEARCH:["Search"],START_YOUR_SEARCH:["Start your search"],BY_USER:["by ","${user}"],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_YOUR:["Oops! There are no matches for “","${searchTerm}","” in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_CONTACTS:["Oops! There are no matches for “","${searchTerm}","” in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_USER:["Oops! There are no matches for “","${searchTerm}","” in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_CONTEXT_GROUP:["Oops! There are no matches for “","${searchTerm}","” in this group."],NO_MATCHES_FOR_QUERY_TERM_YOUR:["Oops! There are no matches for your search in your photos."],NO_MATCHES_FOR_QUERY_TERM_CONTACTS:["Oops! There are no matches for your search in your contacts' photos."],NO_MATCHES_FOR_QUERY_TERM_USER:["Oops! There are no matches for your search in this user's photos."],NO_MATCHES_FOR_QUERY_TERM_GROUP:["Oops! There are no matches for your search in this group."],API_ERROR_HEADER:["Oh noes! We couldn't process your search."],API_ERROR_SUBHEADER:["Please change it up a bit and try again."],PEOPLE_YOU_FOLLOW:["People you follow"],ALL_FLICKR_MEMBERS:["All Flickr members"],FLICKR_MEMBERS:["Flickr members"],YOUR_GROUPS:["Your groups"],ALL_FLICKR_GROUPS:["All Flickr groups"],FLICKR_GROUPS:["Flickr groups"],MEMBER_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 members",one:"${#} member",other:"${#} members"}}],GROUP_PHOTO_COUNT:[{type:"plural",valueName:"count",options:{zero:"no photos",one:"${#} photo",other:"${#} photos"}}],GROUP_DISCUSSION_COUNT:[{type:"plural",valueName:"count",options:{zero:"no discussions",one:"${#} discussion",other:"${#} discussions"}}],YOUR_PHOTOS:["Your photos"],YOUR_ALBUMS:["Your albums"],YOUR_GALLERIES:["Your galleries"],FROM_YOUR_CONTACTS:["From your contacts"],EVERYONES_PHOTOS:["Everyone's photos"],VIEW_ALL_COUNT:[{type:"plural",valueName:"count",options:{zero:"no more photos",other:"View all ${#}"}}],RESULTS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no results",one:"${#} result",other:"${#} results"}}],PEOPLE_PHOTOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}],PEOPLE_VIDEOS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no videos",one:"${#} video",other:"${#} videos"}}],PEOPLE_FOLLOWERS_COUNT:[{type:"plural",valueName:"count",options:{zero:"no followers",one:"${#} follower",other:"${#} followers"}}],SAFESEARCH_ON:["SafeSearch on"],SAFESEARCH_OFF:["SafeSearch off"],SAFESEARCH_MODERATE:["SafeSearch moderate"],SEARCH_PHOTOSTREAM:["Search photostream"],SEARCH_FAVORITES:["Search favorites"],ANY_LICENSE:["Any license"],ALL_CC:["All creative commons"],COMMERCIAL_USE:["Commercial use allowed"],MODS_ALLOWED:["Modifications allowed"],COMMERCIAL_USE_MODS:["Commercial use & mods allowed"],NO_RESTRICTIONS:["No known copyright restrictions"],MARKETPLACE_LICENSE:["Flickr Marketplace"],US_GOVT:["U.S. Government works"],PUBLIC_DOMAIN_DEDICATION:["Public Domain Dedication (CC0)"],PUBLIC_DOMAIN_WORK:["Public Domain Work"],CC_BY_NC_SA:["Attribution-NonCommercial-ShareAlike"],CC_BY_NC:["Attribution-NonCommercial"],CC_BY_NC_ND:["Attribution-NonCommercial-NoDerivs"],CC_BY:["Attribution"],CC_BY_SA:["Attribution-ShareAlike"],CC_BY_ND:["Attribution-NoDerivs"],PLAIN_COUNT:[{type:"plural",valueName:"count",options:{zero:"0",one:"${#}",other:"${#}"}}],PHOTOS:["Photos"],PEOPLE:["People"],GROUPS:["Groups"],PHOTOS_POSSESSIVE:["${name}","'s photos"],FAVES_POSSESSIVE:["${name}","'s favorites"],CONTACTS_POSSESSIVE:["${name}","'s contacts"],GROUPS_POSSESSIVE:["${name}","'s groups"],VIEWER_FAVES:["Your favorites"],IN_GROUP_POOL:["In the ","${name}"," group pool"],OPT_OUT_MESSAGE:["You are viewing the alpha version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE:["Go back to the alpha search experience"],OPT_OUT_MESSAGE_BETA:["You are viewing the beta version of our new search experience. Click here to return to the old version."],OPT_IN_MESSAGE_BETA:["Go back to the beta search experience"],SEARCH_BETA_LABEL:["Search beta"],SEARCH_ALPHA_LABEL:["Search alpha"],GO_BACK_TO_OLD_SEARCH:["Go back to the old Flickr search"],PROVIDE_FEEDBACK:["Provide feedback"],FROM_PEOPLE_YOU_FOLLOW:["From people you follow"],FULL_TEXT_AND_TAGS:["Full text with suggested tags"],FULL_TEXT:["Full text"],TAGS_ONLY:["Tags only"],RED:["Red"],DARK_ORANGE:["Dark orange"],ORANGE:["Orange"],SCHOOL_BUS_YELLOW:["School bus yellow"],LEMON_YELLOW:["Lemon yellow"],GREEN:["Green"],LIME_GREEN:["Dark lime green"],CYAN:["Cyan"],BLUE:["Blue"],VIOLET:["Violet"],PINK:["Pink"],PALE_PINK:["Pale pink"],WHITE:["White"],GRAY:["Gray"],BLACK:["Black"],MONOCHROME:["monochrome"],JOINED_DATE:["Joined ",{type:"date",valueName:"intlDate",format:"monthYearShort"}],HIDE_INACTIVE_GROUPS:["Hide inactive groups"],ADVANCED:["Advanced"],ORIENTATION_AND_SIZE:["Orientation & size"],ORIENTATION:["Orientation"],MINIMUM_SIZE:["Minimum size"],PORTRAIT:["Portrait"],SQUARE:["Square"],LANDSCAPE:["Landscape"],PANORAMA:["Panorama"],SMALL_SHOW_ALL_SIZES:["Small (show all sizes)"],ALL_SIZES:["All sizes"],MEDIUM:["Medium"],LARGE:["Large"],CUSTOM:["Custom"],COLOR:["Color"],DATE:["Date"],FROM:["From"],TO:["To"],DATE_TAKEN:["Date taken"],DATE_POSTED:["Date posted"],DATE_UPLOADED:["Date uploaded"],CONTENT:["Content"],VIDEOS:["Videos"],SCREENSHOTS:["Screenshots"],ILLUSTRATIONS:["Illustrations"],SEARCH_IN:["Search in"],RESET:["Reset"],JUSTIFIED_VIEW:["Justified view"],THUMBNAIL_VIEW:["Thumbnail view"],TILE_VIEW:["Tile view"],SORT:["Sort"],TOGGLE_ADVANCED:["Toggle advanced"],CAMERA_SETTINGS:["Camera settings"],TOGGLE_SEARCH:["Toggle Search"],PHOTOS_PEOPLE_OR_GROUPS:["Photos, people, or groups"],PHOTOS_PEOPLE_GROUPS:["Photos, people, groups"],SMALL_SHORT:["S"],MEDIUM_SHORT:["M"],LARGE_SHORT:["L"],ALL:["All"],TAGS:["Tags"],CLEAR:["Clear"],ABSTRACT:["Abstract"],ART:["Art"],BLACK_AND_WHITE:["Black and white"],MONOCHROME_STYLE:["Monochrome"],BLUR:["Blur"],BRIGHT:["Bright"],CURVES:["Curves"],DIAGONAL:["Diagonal"],ETHEREAL:["Ethereal"],GEOMETRIC:["Geometric"],HDR:["HDR"],LINES:["Lines"],MACRO:["Macro"],DEPTH_OF_FIELD:["Shallow depth of field"],MINIMALIST:["Minimalist"],PASTEL:["Pastel"],PATTERNS:["Patterns"],ROUND:["Round"],SERENE:["Serene"],SYMMETRY:["Symmetry"],TEXTURES:["Textures"],TRIANGLES:["Triangles"],VINTAGE:["Vintage"],BOKEH:["Bokeh"],SEARCH_PHOTOS:["Search photos"],SEARCH_PEOPLE:["Search people"],SEARCH_GROUPS:["Search groups"],EVERYONE:["Everyone"],SIGN_IN_BEFORE_SEARCH_TITLE:["This content is for mature audiences only."],SIGN_IN_BEFORE_SEARCH_MESSAGE:["Join Flickr to turn off safe search."],SIGNUP_FOOTER_MESSAGE:["Private photo management and an inspiring community."]})},"@VERSION@",{requires:["intl"]});YUI.add("search-autosuggest-field-view",function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var s=this.appContext.getLocation();return this.set("searchUrl",new e.SearchUrl(s.href,this.appContext)),this.set("siteSection",e.URLHelper.getSiteSectionByURL(s.pathname)),this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"})}),this.isSOHP=t.isSOHP,this},subviewConfig:{"search-autosuggest-items-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.appContext.getUA().isMobileOrTablet}}},loadState:function(){return this.getContextModelPromise()},buildContainer:function(){var e=this.get("context"),t=this.get("searchUrl").getSearchTerm(),s=[];return e&&e.type&&s.push({combo:!0,name:e.name,secondName:this.get("contextToString")[e.scope]}),this.setContainerWithTemplate("search-autosuggest-field",{searchTerm:t,pills:s,hasPills:s.length>0}),(s.length>0||t.length>0)&&this.get("container").addClass("expanded"),this},activate:function(){var t=this.get("container"),s=t.one("#search-field");t.one(".search-form");this.attachKeyEvent("up:83",this.focusSearchField.bind(this)),t.one("form")&&this.registerEventHandler(t.one("form").on("submit",this.executeSearch.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",this.addContext.bind(this))),this.registerEventHandler(e.on("transfer-to-gn-search",this.addSearchText.bind(this))),this.registerEventHandler(t.on("mousedown",this.handleMouseDown.bind(this))),this.registerEventHandler(s.on({valuechange:this.updateAutosuggestItems.bind(this),focus:this.handleSearchFieldFocus.bind(this),blur:this.handleSearchFieldBlur.bind(this)})),this.registerEventHandler(s.on("key",this.handleSearchFieldKeydown.bind(this),"down:27,38,40,8"));try{e.config.doc.activeElement.isEqualNode(s.getDOMNode())&&(this.blurSearchField(),this.focusSearchField())}catch(e){}return this},getContextModelPromise:function(){var t=this.get("searchUrl").getAPIParams(),s=e.Promise.resolve(),a=null,i=this;return t[e.SearchHelper.API.groupId]?(a={type:"group",id:t[e.SearchHelper.API.groupId],scope:"photos"},s=this.appContext.getModel("group-info-models",a.id)):t[e.SearchHelper.API.userId]?(a={type:"user",id:t[e.SearchHelper.API.userId],scope:t[e.SearchHelper.API.faves]?"favorites":"photostream"},t[e.SearchHelper.API.faves]?a.scope="favorites":t[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]?a.scope="albums":a.scope="photostream",s=this.appContext.getModel("person-models",a.id)):t[e.SearchHelper.API.faves]?(a={type:"user",id:this.appContext.getViewer().nsid,scope:"favorites"},s=this.appContext.getModel("person-models",a.id)):t[e.SearchHelper.API.contacts]?a={type:"contacts",scope:"photos",name:this.get("contextToString").contacts}:t[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(a={type:"everyone",scope:"photos",name:this.get("contextToString").everyone}),s.then(function(e){e&&(a.name="user"===a.type?e.getValue("displayname"):e.getValue("group").getValue("title")),i.set("context",a)})},handleMouseDown:function(e){var t=e.target;1===e.which&&(t.hasClass("search-pill-remover")?(e.halt(),this.removeContext()):t.hasClass("search-icon-button")?(e.halt(),this.executeSearch(e)):(t.hasClass("search-pill")||t.hasClass("search-pillbox")||t.hasClass("search-form"))&&(e.halt(),this.focusSearchField()))},addSearchText:function(e){var t=this.get("container").one("#search-field");t.set("value",t.get("value")+e),this.focusSearchField()},addPill:function(t,s){var a,i={name:t};s&&(i.combo=!0,i.secondName=s),a=e.Node.create(this.templates("search-pill")(i)),this.get("container").one(".search-pillbox").appendChild(a)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},addContext:function(t){var s=this.get("context");s&&s.id===t.id&&s.name===t.name&&s.type===t.type&&s.scope===t.scope||(s&&s.type?(this.removeContext(),this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope])):(this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope]))),this.fire("parentViewEvent","disable-autosuggest"),this.get("container").one("#search-field").set("placeholder",""),this.focusSearchField(),e.rapidTracker.beacon(this.name,"searchAddContext_"+t.type+"_"+t.scope)},removeContext:function(){var t=this.get("container"),s=t.one("#search-field");this.set("context",null),s.set("placeholder",this.intlMessage({intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"})),this.removePills(),this.blurSearchBar(),e.fire("remove-context-in-search-field",{}),e.rapidTracker.beacon(this.name,"searchRemoveContext"),this.get("siteSection")&&"search"===this.get("siteSection").name&&s.get("value").length>0?this.executeSearch():(this.updateAutosuggestItems(),t.hasClass("expanded")&&(this.fire("parentViewEvent","enable-autosuggest"),this.firstAutosuggestView||(e.rapidTracker.beacon(this.name,"autosuggestShow"),this.firstAutosuggestView=!0)))},onParentViewEvent:function(e,t){switch(t&&t.length&&t[0]){case"resize-search-field":this.resizeSearchField(t[1]);break;case"focus-search-field":this.focusSearchField();break;case"clear-search-field":this.clearSearchField()}},onSubviewEvent:function(e,t){var s,a,i=t&&t.length&&t[0],r=this.get("container");switch(i){case"autosuggest-lost-all-focus":this.handleAutosuggestBlur();break;case"focus-search-field":this.focusSearchField();break;case"autosuggest-no-items":r.removeClass("autosuggest-active");break;case"autosuggest-has-items":r.addClass("autosuggest-active");break;case"autosuggest-update-field":(a=r.one("#search-field"))&&"string"==typeof t[1]&&a.set("value",t[1]);break;case"backspace-focus":(a=r.one("#search-field"))&&(s=a.get("value"),a.set("value",s.substring(0,s.length-1)),this.focusSearchField())}},executeSearch:function(t){var s,a,i,r={};t&&t.halt(),s=this.get("container").one("#search-field").get("value"),(i=this.get("context"))&&i.type?("group"===i.type&&"discussions"===i.scope?(r.q=s,r.w=i.id,r.m="discuss",a=new e.SearchUrl(r,this.appContext,e.SearchUrl.searchTypes.CLASSIC_GROUPS)):("user"===i.type?(r[e.SearchHelper.API.userId]=i.id,"favorites"===i.scope?r[e.SearchHelper.API.faves]=1:"albums"===i.scope?r[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]=1:r[e.SearchHelper.API.userId]=i.id):"group"===i.type?r[e.SearchHelper.API.groupId]=i.id:"contacts"===i.type?r[e.SearchHelper.API.contacts]="all":i.type,r[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]=1,a=this.get("searchUrl"),Object.keys(r).forEach(function(e){a.setAPIParam(e,r[e])}),a.setSearchType(e.SearchUrl.searchTypes.PHOTOS),a.setSearchTerm(s)),e.rapidTracker.beacon(this.name,"searchWithContext_"+i.type+"_"+i.scope)):(a=this.get("searchUrl")).createNewSearch(s),this.appContext.flapp.navigate(a.getURL())},focusSearchField:function(t){e.OverlayManager.DroparoundOverlay.closeAll(),this.get("container").one("#search-field").focus()},blurSearchField:function(e){this.get("container").one("#search-field").blur()},resizeSearchField:function(e){e?(this.get("container").setStyle("width",e+"px"),this.get("container").one("#search-field").setStyle("width",e+"px")):(this.get("container").removeAttribute("style"),this.get("container").one("#search-field").removeAttribute("style"))},clearSearchField:function(e){this.get("container").one("#search-field").set("value","")},updateAutosuggestItems:function(e){var t=this.get("container").one("#search-field").get("value");e&&e.halt(),this.get("context")||this.fire("parentViewEvent","update-autosuggest-items",t)},handleSearchFieldFocus:function(t){var s,a=this.get("container"),i=a.one(".search-form"),r=this;t.halt(),a.hasClass("focus")||(a.addClass("focus"),a.addClass("expanded"),this.expandTimer&&clearTimeout(this.expandTimer),this.get("context")||(s=this.registerEventHandler(i.on("transitionend",function(){r.detachRegisteredEvent(s),r.updateAutosuggestItems(),a.hasClass("expanded")&&(r.fire("parentViewEvent","enable-autosuggest"),r.firstAutosuggestView||(e.rapidTracker.beacon(r.name,"autosuggestShow"),r.firstAutosuggestView=!0))}))))},blurSearchBar:function(){clearTimeout(this.expandTimer),this.expandTimer=setTimeout(function(){var t=this.get("container"),s=this.get("context");e.one(e.config.doc.activeElement).hasClass("autosuggest-selectable-item")||(t.removeClass("focus"),t.removeClass("autosuggest-active"),s&&s.type||0!==t.one("#search-field").get("value").length||t.removeClass("expanded"),this.fire("parentViewEvent","disable-autosuggest"))}.bind(this),150)},handleSearchFieldBlur:function(e){e.halt(),e.relatedTarget&&e.relatedTarget.hasClass("search-icon-button")?this.executeSearch():this.blurSearchBar()},handleAutosuggestBlur:function(){this.blurSearchBar()},handleSearchFieldKeydown:function(t){var s=t.keyCode,a=t.target;switch(s){case 27:t.halt(),this.blurSearchField();break;case 38:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","up");break;case 40:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","down");break;case 8:0===e.fluid.getTextFieldCursorPosition(a)&&""===e.fluid.getTextFieldSelection()&&this.removeContext()}},destructor:function(){clearTimeout(this.expandTimer),this.expandTimer=null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-field","hermes-template-search-pill","search-url","autosuggest-context-results-models","storage-helper","search-autosuggest-items-list-view","url-helper"],optionalRequires:["fluid"],langBundles:["search","common","groups"]});YUI.add("hermes-lang-groups",function(e,o){e.Intl.add("hermes/groups","en-US",{POST_THRESHOLD_EVER:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool."],POST_THRESHOLD_DAY:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each day."],POST_THRESHOLD_MONTH:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each month."],POST_THRESHOLD_WEEK:["Members can post ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> thing",other:"<b>${#}</b> things"}}," to the pool each week."],ACCEPTED_CONTENT_TYPES:["Accepted content types:"],ACCEPTED_SAFETY_LEVELS:["Accepted safety levels:"],PHOTOS:["Photos"],VIDEOS:["Videos"],IMAGES:["Images"],SCREENSHOTS:["Screenshots"],ART:["Art"],SAFE:["Safe"],MODERATE:["Moderate"],RESTRICTED:["Restricted"],SEE_ALL_DISCUSSIONS:["See all discussions"],DISCUSSION_TITLE:["Title"],DISCUSSION_AUTHOR:["Author"],DISCUSSION_REPLIES:["Replies"],DISCUSSION_LAST_POST:["Latest Post"],DISCUSSION_LAST_REPLIER:["Last Replier"],NO_DISCUSSIONS:["Be the first to start a group discussion!"],BE_THE_FIRST:["Be the first to add a photo to the group!"],BE_THE_FIRST_JOIN:["Help get this group started: click the join button above!"],BE_THE_FIRST_SIGN_IN:["Help get this group started: sign in and contribute photos!"],NO_PHOTOS_BY_YOU:["You haven't added any photos yet. What are you waiting for?"],WHO_IS_ME:['Who is this "me" of which you speak?'],INVALID_PERSON:["Never heard of them! Sorry!"],ADD_SOME_PHOTOS:["Add some photos"],NO_PHOTOS:["No photos in this group"],POOL_PREVIEW_HEADER:["Photo pool"],POOL_HEADER:["Group pool"],ADD_PHOTO:["Add photo"],VIEW_X_PHOTOS:[{type:"plural",valueName:"count",options:{one:"View ${#} photos",other:"View ${#} photos"}}],DISCUSSIONS:["Discussions"],ADD_TOPIC:["Add topic"],SEARCH_DISCUSSIONS:["Search discussions"],SEARCH_POOL:["Search pool"],ADD_A_TOPIC:["Add a topic"],TOP_CONTRIBUTORS:["Top Contributors"],CONTRIBUTORS:["Contributors"],CONTRIBUTORS_RANK:["Rank"],CONTRIBUTORS_LATEST_PHOTO:["Latest Photo"],CONTRIBUTORS_PHOTOS:["Photos"],CONTRIBUTORS_DISCUSSIONS:["Discussions"],CONTRIBUTORS_JOINED_GROUP:["Joined Group"],SEE_ALL_MEMBERS:["View all members"],TOTAL_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"${#} discussion in",other:"${#} discussions in"}}," ","${groupname}"],DISCUSSION_STICKY:["Sticky"],RANKING:["#","${count}"],BLAST_INVITED_MEMBER:["MEMBER"],BLAST_PENDING_MEMBER:["MEMBER"],BLAST_GROUP_MEMBER:["MEMBER"],BLAST_MODERATOR:["MODERATOR"],BLAST_ADMIN:["ADMIN"],SHARE:["Share"],EIGHTTEEN_PLUS_SIGNEDIN:["This group is 18+, do you want to enter?"],EIGHTEEN_PLUS_SIGNEDOUT:["This group is 18+. Sign in to view the group."],NO:["No"],YES:["Yes"],GROUP_POOL_LOADING_ERROR:["Error loading the group's pool photos"],GROUP_DISCUSSION_LOADING_ERROR:["Error loading the group's discussion list"],GROUP_TOP_CONTRIBUTORS_LOADING_ERROR:["Error loading the group's top contributors"],GROUP_DELETION_ERROR:["Something went wrong deleting the photo...please try again."],RETRY:["Retry"],ADDED_NOTIFICATION:['Success! Would you like to <a href="',"${url}",'">add something else</a>?'],NOT_ADDED_NOTIFICATION:['That’s already in the group pool. <a href="',"${url}",'">Try something else?</a>'],PENDING_NOTIFICATION:['Your photo/video has been submitted the group. If approved by the group administrator, it will show up in the group pool. Would you like to <a href="',"${url}",'">add another</a>?'],DONE_PENDING_NOTIFICATION:["All done! There's nothing else to moderate."],GROUP_ADD_PENDING:["Pending approval by administrator"],DELETED_NOTIFICATION:["That item has been removed from the pool."],POOL_MEMBERS_ONLY:["This group pool is for members only."],DISCUSSION_MEMBERS_ONLY:["This group discussion is for members only."],DISCUSSION_MEMBERS_ONLY_INTERSTITIAL:["This group discussion is for members only. Join the conversation with the Join group button above, or click Overview to learn more about the group."],REMOVE_PHOTO:["Remove this photo from the group pool?"],PENDING_COUNT_NOTIFICATION:['You have <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 photos",one:"${#} photo",other:"${#} photos"}}," pending</a>"],X_GROUPS:[{type:"plural",valueName:"count",options:{one:"${#} Group",other:"${#} Groups"}}],HAS_NONE:["Looks like you don't belong to any group, so there is a list of ones you might like below."],SIGNED_OUT:["Groups are a fabulous way to share content and conversation, either privately or with the world. Believe us when we say there's probably a group for everyone, but if you can't find one you like, feel free to start your own."],LAST_REPLY_TIME_AGO:['<a href="',"${replyurl}",'" data-track="groupDiscussionTopicLastReplyClick">',"${time}"," ago</a>"],MEMBERS_ONLY_POOL_JOIN:["Only members can see this group pool. Click Overview above to learn more about the group, or the Join group button above to, uh...join!"],MEMBERS_ONLY_POOL_SIGN_IN:["Only members can see this group pool. Sign in to join the group."],PRIVATE_GROUP:["You've reached a private group."],RETURN_HOME:["Return home"],DISCUSSIONS_DISABLED:["Discussions are disabled for this group."],GO_TO_GROUP_HOME:["Go to group home"],GROUP_JOIN_RULES_DIALOG_TITLE:["Group Rules"],GROUP_JOIN_RULES_DIALOG_MESSAGE:["If you agree to these rules, you can join the group."],GROUP_JOIN_RULES_DIALOG_ACCEPT:["I agree"],GROUP_JOIN_RULES_DIALOG_DECLINE:["No, thanks"],GROUP_JOIN_ERROR:["Something went wrong with joining the group."],GROUP_LEAVE_ERROR:["Something went wrong with leaving the group."],GROUPS:["Groups"],GROUPS_LIST_LOADING_ERROR:['There was an issue loading the groups.<br>Click <a class="retry">Reload</a> to try again.'],GROUPS_LIST_ERROR_HEADER:["Error loading groups"],CONTRIBUTORS_DISCUSSION_TOPICS:["Topics"],GROUPS_LIST_GROUPS:["Groups"],GROUPS_LIST_MEMBERS:["Members"],GROUPS_LIST_PHOTOS:["Photos"],GROUPS_LIST_TOPICS:["Topics"],GROUPS_LIST_LATEST:["Latest"],GROUPS_LIST_LATEST_DISCUSSION:["Latest Post"],GROUPS_LIST_LATEST_PHOTO:["Latest Photo"],GROUPS_LEAVE_WARNING_TITLE:["Leave ","${title}","?"],GROUPS_LEAVE_WARNING:['Do you really want to leave the group "',"${title}",'?"'],GROUPS_LEAVE_WARNING_LAST_MEMBER:['Do you really want to leave the group "',"${title}",'"? Because you are the last person in this group, the group will be deleted if you leave.'],GROUPS_LEAVE_WARNING_ADMIN:['Do you really want to leave the group "',"${title}",'"? If you are the last administrator in this group, the longest serving member will be promoted to administrator after you leave.'],GROUPS_LEAVE_WARNING_REMOVE_PHOTOS:["<div class='checkbox-prompt'><label><input type=\"checkbox\">Also remove all the photos & videos you have added to the group pool?</input></label></div>"],GROUPS_LEAVE_WARNING_LEAVE_BUTTON:["Leave this group"],GROUPS_LEAVE_WARNING_CANCEL_BUTTON:["Cancel"],EMPTY_BLAST:["There's no admin blast."],ADD_BLAST:["Why don't you add one?"],REMOVING_BLAST:["Removing Blast..."],CREATE_BLAST:["Add Group Admin Blast"],BACK_TO_OVERVIEW:["Back to group overview"],GROUP_POOL:["Group pool"],NO_VISIBLE_PHOTOS:["${screenname}"," doesn't have any photos visible to you in the ","${groupTitle}"," pool."],UPDATE_BLAST_ERROR:["Could not update the group blast at this time"],DELETE_BLAST_ERROR:["Could not delete the group blast at this time"],LONG_BLAST_ERROR:[{type:"plural",valueName:"count",options:{one:"Group blast is ${#} character, it must be less than 496 characters.",other:"Group blast is ${#} characters, it must be less than 496 characters."}}],GROUPS_LIST_BELONG_HEADER:["Groups you are a member of"],GROUPS_LIST_BELONG_MORE:["View all groups you are a member of"],PENDING:[{type:"plural",valueName:"count",options:{one:"${#} pending",other:"${#} pending"}}],GROUPS_ADMIN:["Groups you administer"],GROUPS_MODERATED:["Groups you moderate"],GROUPS_BELONG:["Groups you are a member of"],GROUPS_FAVED:["Groups you faved"],VIEW_ALL_GROUPS_ADMIN:["View all groups you administer"],VIEW_ALL_GROUPS_MODERATED:["View all groups you moderate"],GROUP_DESCRIPTION:["Group Description"],GROUP_RULES:["Group Rules"],GROUP_ADDITIONAL_INFO:["Additional Info"],PENDING_MEMBER_COUNT_NOTIFICATION:['You have <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 pending members",one:"${#} pending member",other:"${#} pending members"}},"</a>"],BLAST_DATE_ADDED:[{type:"date",valueName:"blastDateAdded",format:"long"}],GROUP_DISCUSSION_START:["Start a discussion"],GROUP_DISCUSSION_DELETE_REPLY:["Delete reply"],GROUP_DISCUSSION_CONFIRM_DELETE:["Are you sure you want to delete this reply?"],GROUP_DISCUSSION_DELETE:["Delete"],GROUP_DISCUSSION_DELETE_FAILED:["Failed to delete reply, please try again."],GROUP_DISCUSSION_PUBLISH_FAILED:["Failed to post reply, please try again."],GROUP_DISCUSSION_PUBLISH_REPLY:["Post reply"],GROUP_DISCUSSION_RECENT_DISCUSSIONS:["Discussions"],GROUP_DISCUSSION_POST_REPLY:["Post reply"],GROUP_DISCUSSION_PUBLISH:["Post Reply"],GROUP_DISCUSSION_PREVIEW:["Preview"],GROUP_DISCUSSION_EDIT_FAILED:["Failed to edit reply, please try again."],GROUP_DISCUSSION_EDIT_REPLY:["Edit reply"],GROUP_DISCUSSION_PREVIEW_EDIT_FAILED:["Failed to preview edit, please try again."],GROUP_DISCUSSION_PREVIEW_EDIT:["Preview edit"],GROUP_DISCUSSION_PREVIEW_REPLY_FAILED:["Failed to preview reply, please try again."],GROUP_DISCUSSION_PREVIEW_REPLY:["Preview reply"],GROUP_DISCUSSION_POST_LOCKED_WITH_LINK:["Group discussion in ","${groupname}",' has been locked. (<a href="',"${unlockUrl}",'">unlock?</a>)'],GROUP_DISCUSSION_POST_LOCKED:["This topic has been locked."],GROUP_DISCUSSION_REPLY_EDITED:["Posted ","${createdAgo}",". Edited ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_WITH_ROLE:["Posted ","${createdAgo}",". Edited by ","${editAuthor}"," (","${editRole}",") ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_BY_STAFF:["Posted ","${createdAgo}",". Edited by ","${editAuthor}"," (Staff) ","${editedAgo}"],GROUP_DISCUSSION_DELETE_TOPIC:["Delete topic"],GROUP_DISCUSSION_CONFIRM_DELETE_TOPIC:["Are you sure you want to delete this topic?"],GROUP_DISCUSSION_STICKY_FAILED:["Failed to mark/unmark this topic as sticky.  Please try again"],GROUP_DISCUSSION_STICKY:["Sticky"],GROUP_DISCUSSION_LOCK_FAILED:["Failed to lock/unlock this topic.  Please try again"],GROUP_DISCUSSION_LOCK:["Lock Topic"],DISCUSSION_REPLY_REPLY_PROMPT:["Click to reply to the reply"],DISCUSSION_REPLY_PERMALINK_PROMPT:["Permalink"],DISCUSSION_REPLY_DELETE_PROMPT:["Click to delete this reply"],DISCUSSION_REPLY_EDIT_PROMPT:["Click to edit this reply"],GROUP_DISCUSSION_LOCK_CONFIRMATION_TITLE:["Lock topic"],GROUP_DISCUSSION_LOCK_CONFIRMATION:["Are you sure you want to lock this topic?"],GROUP_DISCUSSION_LOCK_BUTTON:["Lock"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION_TITLE:["Unlock topic"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION:["Are you sure you want to unlock this topic?"],GROUP_DISCUSSION_UNLOCK_BUTTON:["Unlock"],DISCUSSION_MORE_LINK:["More..."],DISCUSSION_SEARCH_LINK:["Search this group's discussions"],DISCUSSION_FORMAT_REPLY:["Want to format your reply?"],GROUP_DISCUSSION_FORMATTING_TITLE:["Discussion Formatting"],GROUP_DISCUSSION_FORMATTING_CLOSE:["Close"],SIGN_IN_TO_REPLY:["Sign in to reply"],DISCUSSION_SIGN_IN_TO_REPLY:["Sign in to reply!"],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED:["Failed to post reply. This topic has now been locked."],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED_OR_NONMEMBER:["Failed to post reply. This topic is locked or you are not a member of the group."],GROUP_DISCUSSION_PUBLISH_FAILED_DELETED:["Failed to post reply.  This topic has been deleted."],GROUP_DISCUSSION_GROUP_LOCKED:["All discussions are locked for this group"],GROUP_DISCUSSION_GROUP_LOCKED_WITH_LINK:['All discussions are locked for this group (<a title="unlock group discussions?" href="',"${unlockUrl}",'">unlock?</a>)'],CREATED_YEAR:["Since ","${createdYear}"],UPDATED_TIME_AGO:["Updated ","${updatedAgo}"],GROUP_JOIN:["Join Group"],GROUP_JOIN_SHORT:["Join"],GROUP_JOINED:["Joined"],GROUP_JOIN_REQUESTED:["Join Requested"],GROUP_JOIN_REQUESTED_SHORT:["Pending"],GROUP_LEAVE_GROUP:["Leave Group"],GROUP_LEAVE_GROUP_SHORT:["Leave"],PHOTOS_LINK_LABEL:["Photos"],DISCUSSIONS_LINK_LABEL:["Discussions"],ADMIN_LINK_LABEL:["Administration"],ERROR_LOADING:["There was an error loading this group. Please try again later."],VISIBLE_REPLIES:["(","${from}"," to ","${to}"," of ","${total}"," replies)"],JOIN_GROUP_TO_START_DISCUSSION:["Join the group to start a discussion!"],POOL_PREVIEW:[{type:"plural",valueName:"count",options:{one:"Showing ${#} row",other:"Showing ${#} rows"}}],GROUP_BAN_MEMBER:["Ban Member"],GROUP_BAN_USER:["Ban user from the group"],GROUP_BAN_USER_REMOVE_PHOTOS:["Ban user and remove their photos from the group"],GROUP_BAN_USER_SUCCESS:["User successfully banned from the group.  If you opted to remove their photos and there are a lot of photos in the pool, it may take a while for all the photos to be removed from the pool."],GROUP_REMOVE_USER:["Remove user from the group"],GROUP_REMOVE_USER_REMOVE_PHOTOS:["Remove user and their photos from the group"],GROUP_REMOVE_USER_SUCCESS:["User successfully removed from the group.  If you opted to remove their photos and there are a lot of photos in the pool, it may take a while for all the photos to be removed from the pool."],GROUP_REMOVE_MEMBER_FAILED_ALREADY:["Failed to remove the member at this time.  They may have already been removed from the group."],GROUP_REMOVE_MEMBER_FAILED:["Failed to remove the member at this time.  Please try again."],GROUP_BAN_MEMBER_FAILED:["Failed to ban the member at this time.  Please try again."],GROUP_BAN_MEMBER_CONFIRM:["Are you sure you want to ban this member from the group?"],GROUPS_BAN_MEMBER_BUTTON:["Ban Member"],GROUPS_BAN_MEMBER_CANCEL_BUTTON:["Cancel"],GROUP_BAN_MEMBER_SUCCESS:["Member successfully banned from the group"],GROUP_BAN_MEMBER_FAILED_ALREADY:["Failed to ban the member at this time.  They may have already been banned from the group."],GROUP_MEMBERS_SIGNIN:["Sign in to see the group's members."],GROUP_MEMBERS_ERROR_LOADING:["There was an error loading this group's members. Please try again later."],GROUP_MEMBERS_LOADMORE:["Load more members"],GROUP_LANDING_HEADLINE:["Flickr groups are a great way to share photos, post comments, and hold discussions around a common theme."],GROUP_RECOMMENDED_GET_STARTED:["Get started with these Flickr Groups"],GROUP_RECOMMENDED_JOIN_A_GROUP:["Join a group!"],SIGN_IN_BEFORE_JOIN_TITLE:["You found a group to join!"],SIGN_IN_BEFORE_JOIN_MESSAGE:["That's fantastic. Just sign in to join ","${name}","."],SIGN_UP_AND_JOIN_MESSAGE:["Join Flickr to become a member of ","${name}","."],SIGN_IN_AND_JOIN:["Sign in and join"],SIGN_UP_BEFORE_CREATE_TITLE:["Create a new Flickr Group!"],SIGN_UP_AND_CREATE_MESSAGE:["Join Flickr to create a new group."],GROUPS_SUBNAV_MEMBERS:[{type:"plural",valueName:"count",options:{one:"member",other:"members"}}],GROUPS_SUBNAV_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"discussion",other:"discussions"}}],GROUPS_SUBNAV_PHOTOS:[{type:"plural",valueName:"count",options:{one:"photo",other:"photos"}}],GROUPS_COVER_ATTRIBUTION:["Photo by ","${username}"],GROUPS_BACK_TO_MINE:["Back to my groups"],GROUPS_BACK_TO_OTHERS:["Back to ","${username}"," groups"],GROUPS_FOUNDED:["Founded on ",{type:"date",valueName:"intlDate",format:"long"}],NO_PUBLIC_GROUPS:["This user has not joined any public groups."],RECOMMENDED_GROUPS:["Recommended groups:"],GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS:["No public photos in the group pool"],GROUP_INVITE_ONLY_HEADER:["Membership in ","${groupName}"," is by invitation only."],GROUP_INVITE_ONLY_DESC:["All you need to do is contact the administrator responsible for invitations to let them know you're interested in signing up!"],GROUP_INVITE_ONLY_CONTACT_ADMIN:["Contact the group administrator"],GROUP_INVITE_ONLY_SEND:["Send"],GROUP_INVITE_EMPTY_MESSAGE:["Message is empty."],GROUP_INVITE_PENDING:["Your request to join ","${groupName}"," is still awaiting moderator attention - hang in there!"],GROUP_SLOW:["We're having some trouble displaying this group at the moment. Please try again."],RESET_FILTER:["Reset Filter"],GROUP_CREATION_INTRO:['Take a look at our <a href="',"${group_guidelines_url}",'" target="_blank">Group Guidelines</a> or the <a href="',"${help_url}",'" target="_blank">Group Help Pages</a> for tips on running a successful group on Flickr. Good luck, and have fun!'],PUBLIC_GROUP:["Public group"],PUBLIC_GROUP_DESC_1:["The group page is public and anyone who wants to can join instantly."],INVITE_ONLY_GROUP:["Invite-Only group"],INVITE_ONLY_GROUP_DESC_1:["Anyone can view an Invite-Only group page, but the only way to join the group is by invitation."],INVITE_ONLY_GROUP_DESC_3:["This group type has the option to be completely private and unsearchable."],ALL_GROUP_DESC_2:["Admins can choose to show or hide discussions and/or group pools from non-members."],MAKE_GROUP_PRIVATE:["Make this group private"],PRIVATE_GROUP_DESC_1:["Only group members and those who have been invited will be able to view the group page."],PRIVATE_GROUP_DESC_2:['Private groups <span class="bold">cannot be made public later</span>.'],GROUP_NAME_DESC_INSTRUCTION:["Give your group a name and description in ",{type:"select",valueName:"lang",options:{"en-US":["English"],"de-DE":["German"],"es-US":["Spanish"],"fr-FR":["French"],"id-ID":["Indonesian"],"it-IT":["Italian"],"ko-KR":["Korean"],"pt-BR":["Portuguese"],"vi-VN":["Vietnamese"],other:["Chinese"]}},". You or other group admins will be able to translate it in up to 9 other languages later."],GROUP_NAME_PLACEHOLDER:["Group name"],GROUP_DESC_PLACEHOLDER:["What is the purpose or theme of your group? (optional)"],GROUP_SAFETY_EVERYONE:["This group is safe for everyone"],GROUP_SAFETY_RESTRICTED:["This group is for adults age 18+"],GROUP_TERMINATION_WARNING:['Note: Be sure your group abides by our <a href="',"${comm_guidelines_url}",'" target="_blank">Community Guidelines</a> and <a href="',"${terms_of_service_url}",'" target="_blank">Terms of Service</a>. If you don\'t, Flickr may terminate it without warning.'],IS_INVITED_NOTIFICATION:["You have been invited to this group. Click the Join Group button above to get started!"],UNCONCERNED_WITH_GROUP_PHOTO_LIMIT:["This group doesn't care how many other groups a photo is in"],CONCERNED_WITH_GROUP_PHOTO_LIMIT:["This group will count toward the photo's limit (","${proGroupPhotoLimit}"," for Pro members, ","${freeGroupPhotoLimit}"," for free members)"],YOUR_GROUP_CREATED:["Your group has been created!"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-notifications-menu",function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,t,i){var s;return n.escapeExpression("function"==typeof(s=null!=(s=e.unseenNotificationCount||(null!=a?a.unseenNotificationCount:a))?s:e.helperMissing)?s.call(null!=a?a:{},{name:"unseenNotificationCount",hash:{},data:i}):s)},compiler:[7,">= 4.0.0"],main:function(n,a,e,t,i){var s,l=null!=a?a:{};return'<a class="gn-title c-notifications-menu"\n\ttabindex="0"\n\taria-haspopup="true"\n\taria-expanded="false"\n\taria-label="'+n.escapeExpression((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(l,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'">\n\t<span class="c-notification-icon" aria-hidden="true">\n\t\t<span class="c-notification-unseencount hidden">'+(null!=(s=e.if.call(l,null!=a?a.unseenNotificationCount:a,{name:"if",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i}))?s:"")+"</span>\n\t</span>\n</a>\n"},useData:!0}),t={};n.Array.each([],function(a){var e=n.Template.get("hermes/"+a);e&&(t[a]=e)}),n.Template.register("hermes/notifications-menu",function(a,i){return i=i||{},i.partials=i.partials?n.merge(t,i.partials):t,e(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-notifications",function(t,a){var e=t.Template.Handlebars.revive({1:function(t,a,e,n,l){return"\t\t<li>\n\t\t\t"+t.escapeExpression(t.lambda(a,a))+"\n\t\t</li>\n"},compiler:[7,">= 4.0.0"],main:function(t,a,e,n,l){var i,s,o=null!=a?a:{},h=e.helperMissing,r="function",c=t.escapeExpression;return'<div class="notifications-container" style="width: '+c(typeof(s=null!=(s=e.width||(null!=a?a.width:a))?s:h)===r?s.call(o,{name:"width",hash:{},data:l}):s)+"; height: "+c(typeof(s=null!=(s=e.height||(null!=a?a.height:a))?s:h)===r?s.call(o,{name:"height",hash:{},data:l}):s)+"; overflow-x: "+c(typeof(s=null!=(s=e.overflowX||(null!=a?a.overflowX:a))?s:h)===r?s.call(o,{name:"overflowX",hash:{},data:l}):s)+"; overflow-y: "+c(typeof(s=null!=(s=e.overflowY||(null!=a?a.overflowY:a))?s:h)===r?s.call(o,{name:"overflowY",hash:{},data:l}):s)+';">\n\t<header>\n\t\t<div class="notifications-header-container">\n\t\t\t<h2>'+c((e.intlMessage||a&&a.intlMessage||h).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:l}))+'</h2>\n\t\t</div>\n\t</header>\n\t<ul class="notifications-list" style="max-height: '+c(typeof(s=null!=(s=e.listHeight||(null!=a?a.listHeight:a))?s:h)===r?s.call(o,{name:"listHeight",hash:{},data:l}):s)+';">\n\t\t<li class="notifications-empty-state hidden">\n\t\t\t'+c((e.intlMessage||a&&a.intlMessage||h).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_NOTHING_HERE"},data:l}))+"\n\t\t</li>\n"+(null!=(i=e.each.call(o,null!=a?a.notifications:a,{name:"each",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l}))?i:"")+'\t</ul>\n\n\t<a href="/activity" class="view-all">'+c((e.intlMessage||a&&a.intlMessage||h).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_VIEW_RECENT_ACTIVITY"},data:l}))+"</a>\n</div>\n"},useData:!0}),n={};t.Array.each([],function(a){var e=t.Template.get("hermes/"+a);e&&(n[a]=e)}),t.Template.register("hermes/notifications",function(a,l){return l=l||{},l.partials=l.partials?t.merge(n,l.partials):n,e(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||void 0},defaultFn:function(e){return e}},username:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},proBadge:{defaultValue:"standard",setter:function(t){return e.AttributeHelpers.coerceString(t)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});