YUI.add("mega-limit-overlay-view",function(e,t){var i=require("hermes-core/analytics");e.namespace("Views")[this.name]=e.Base.create("mega-limit-overlay-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.dismissCookieName=e.config.flickr.upload_blocking.dismiss_photo_limit_overlay_cookie_name},loadState:function(){var t=this;return!this.appContext.getCookie(this.dismissCookieName)&&this.appContext.flipper.isFlipped("enable-mega-limit-overlay")&&"products-flickrpro-route"!==this.appContext.routeConfig.module&&this.appContext.getViewer().signedIn?this.appContext.getModel("person-profile-models",this.appContext.getViewer().nsid).then(function(e){t.profileModel=e}):e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("mega-limit-overlay")},activate:function(){var t=this,i=this.get("container"),o=this.getFetchParams();if(this.contentContainer=i.one(".mega-limit-overlay"),this.firstImageCard=this.contentContainer.one(".first-image-card"),this.messageContainer=this.contentContainer.one(".info-message-container"),this.profileModel&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext))return e.Promise.all([this.appContext.getModel("person-models",this.appContext.getViewer().nsid).then(function(e){t.userModel=e}),e.ListFetchers["flickr-people-getPhotos"].run(o,this.appContext).then(function(e){e&&e.length&&(t.photoModel=e[0])})]).then(function(){return t.photoModel?t.renderImageCard():e.Promise.reject()}).then(function(){t.isLoaded=!0,t.fire("loaded"),t.show()})},resizeImage:function(e,t){var i,o,a,n=this.photoModel.getValue("oWidth")/this.photoModel.getValue("oHeight");e=e||500,t=t||430,i=this.contentContainer.get("clientHeight"),(a=(o=Math.min(t,i-70))*n)>e&&(o=(a=e)/n),this.firstImageCard.setStyle("height",o+70),this.firstImageCard.setStyle("width",a),this.photoCardView.updateGeometry({aspectRatio:n,geometry:{width:a,height:o+70,top:0,left:0},isAwake:!0}),this.photoCardView.updateBreakpoints()},renderImageCard:function(){var t=this;return this.photoCardView=new e.Views["infobar-photolist-photo-view"]({appContext:this.appContext,id:this.photoModel.getValue("id"),layoutItem:{aspectRatio:this.photoModel.getValue("oWidth")/this.photoModel.getValue("oHeight"),geometry:{width:this.photoModel.getValue("oWidth"),height:this.photoModel.getValue("oHeight"),top:0,left:0},isAwake:!0},displayViews:!0,displayCurate:!1}),this.photoCardView.initialize().then(function(){return t.firstImageCard.append(t.photoCardView.get("container")),t.photoCardView.activate()})},getFetchParams:function(){return{perPage:1,page:1,userId:this.appContext.getViewer().nsid,orderBy:"date-posted-asc"}},show:function(){var t,o=this,a=this.get("container"),n=Math.min(500,o.appContext.viewportData.getWidth()),s=e.config.flickr.account.photo_limit,r=e.UserLimitsHelper.getARRCount(this.profileModel);t=Math.max(r-s,0).toLocaleString(this.appContext.lang,{maximumFractionDigits:0}),this.messageContainer.append(this.templates("mega-limit-overlay-message")({overLimitCountString:t,rulesUrl:"https://blog.flickr.net/en/2018/12/17/important-service-updates-and-dates-to-remember/",acceptUrl:"/account/upgrade/pro?select",username:this.userModel.getValue("username")})),this.acceptButton=this.contentContainer.one(".accept-button"),this.declineButton=this.contentContainer.one(".decline-button"),a.addClass("displayed"),setTimeout(function(){a.addClass("active"),e.one("body").addClass("locked-for-overlay-scroll")},50),o.resizeImage(n),o.registerEventHandler(e.globalEvents.subscribe("window:resize",e.betterThrottle(function(e){var t=Math.min(500,o.appContext.viewportData.getWidth());o.resizeImage(t)},20,null,!0))),o.registerEventHandler(this.acceptButton.on("click",function(e){o.handleAcceptClick(e)})),o.registerEventHandler(this.declineButton.on("click",function(e){o.handleDeclineClick(e)})),i&&i.tl(!0,"o","Photo Limit Takeover: Show")},hide:function(){var t=this.get("container");e.one("body").removeClass("locked-for-overlay-scroll"),t.removeClass("active"),setTimeout(function(){t.removeClass("displayed")},1e3)},handleAcceptClick:function(t){this.hide(),i&&i.tl(e.one(t.target).getDOMNode(),"o","Photo Limit Takeover: Accept",null,"navigate")},handleDeclineClick:function(t){var o=new Date;o.setTime(o.getTime()+36e10),this.appContext.setCookie({cookieName:this.dismissCookieName,cookieValue:1,expires:o,path:"/"}),this.appContext.setCookie({cookieName:e.config.flickr.upload_blocking.dismiss_over_upload_limit_message_cookie_name,cookieValue:1,expires:o,path:"/"}),i&&i.tl(!0,"o","Photo Limit Takeover: Decline"),this.hide()}})},"@VERSION@",{requires:["flickr-view","hermes-template-mega-limit-overlay","hermes-template-mega-limit-overlay-message","person-public-profile-models","intl-number","user-limits-helper","string-helper","api-helper","infobar-photolist-photo-view"],langBundles:["common","upload-blocking"]});YUI.add("banner-view",function(i,e){var n=require("hermes-core/flog")(e);i.FlickrView.create(this.name,i.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.params=i,this.subview=this.params.subview},loadState:function(){return i.Promise.resolve()},buildContainer:function(){},activate:function(){var i=this,e=this.get("container");if(this.subviewParent=e,this.subview)return this.subview.on("dismiss",function(e){i.dismiss()}),this.setupSubview()},setupSubview:function(){var i=this;return this.subview.initialize().then(function(){var e=i.subview.get("container");{if("canShowBanner"in i.subview)return i.subview.canShowBanner()?(i.subviewParent.empty(),i.subviewParent.appendChild(e),i.subview.activate()):void i.dismiss();n.warn("Banners should implement method canShowBanner")}}).then(function(){i.fire("subviewActivated")})},dismiss:function(){this.get("container").remove(),this.fire("dismissed"),this.destroy()}})},"@VERSION@",{requires:["flickr-view"],langBundles:["common"]});YUI.add("hermes-template-basic-banner",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,s){return'\t\t\t<a role="button" class="button dismiss">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</a>\n'},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,s){var r,i,l=null!=a?a:{},d=n.helperMissing,c=e.escapeExpression;return'<div class="basic-banner '+c("function"==typeof(i=null!=(i=n.additionalClasses||(null!=a?a.additionalClasses:a))?i:d)?i.call(l,{name:"additionalClasses",hash:{},data:s}):i)+'">\n\t<div class="banner-content fluid-centered">\n\t\t<div class="message-container">\n\t\t\t'+c((n.renderTrustedMarkup||a&&a.renderTrustedMarkup||d).call(l,null!=a?a.message:a,{name:"renderTrustedMarkup",hash:{},data:s}))+'\n\t\t</div>\n\t\t<div class="button-container">\n'+(null!=(r=n.if.call(l,null!=a?a.hideDismiss:a,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s}))?r:"")+"\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/basic-banner",function(a,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("login-migration-banner-view",function(e,i){require("hermes-core/flog")(i);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},loadState:function(){var i=this.appContext.getViewer(),t=[];return i.signedIn?(this.set("isCognitoUser",i.isCognitoUser),t.push(this.appContext.getModel("person-models",i.nsid).then(function(e){this.set("hasInvalidEmail",e.getValue("hasInvalidEmail")),this.set("isPro",e.getValue("isPro"))}.bind(this))),t.push(this.appContext.getModel("person-profile-models",i.nsid).then(function(e){this.set("profileModel",e)}.bind(this))),e.Promise.all(t)):(this.set("isCognitoUser",0),e.Promise.resolve())},buildContainer:function(){var i="<p>"+this.intlMessage({intlName:"featured-banner.CHANGES_ARE_COMING"}),t=e.config.flickr.cognito.root+e.config.flickr.cognito["migration-url"];return this.get("hasInvalidEmail")?i+=' <a href="https://flickr.kustomer.help/en_us/add-and-verify-a-new-email-address-ry6qhVBV" target="_blank">'+this.intlMessage({intlName:"featured-banner.UPDATE_YOUR_EMAIL"})+"</a>":i+=' <a href="'+t+'">'+this.intlMessage({intlName:"featured-banner.UPDATE_YOUR_LOGIN"})+"</a>",i+="</p>",this.setContainerWithTemplate("basic-banner",{message:i,additionalClasses:"head-banner-style",hideDismiss:!0}),this},activate:function(){this.get("container");this.fire("activated")},canShowBanner:function(){var e=!1;return!this.appContext.getViewer().signedIn||this.get("isCognitoUser")||this.isABlacklistedView()||(e=!0),e},isABlacklistedView:function(){var e=this.appContext.flapp.get("activeView").name;return!!(e&&["products-pro-2018-view"].indexOf(e)>-1)}})},"@VERSION@",{requires:["flickr-view","hermes-template-basic-banner","user-limits-helper","person-models","person-profile-models"],langBundles:["featured-banner"]});YUI.add("hermes-lang-featured-banner",function(e,a){e.Intl.add("hermes/featured-banner","en-US",{CHANGES_ARE_COMING:["Changes are coming to the way you log into Flickr!"],UPDATE_YOUR_EMAIL:["Update your email address to get started"],UPDATE_YOUR_LOGIN:["Update your login now"],WE_HAD_TROUBLE_PAYMENT:["We had trouble processing your credit card."],PLEASE_UPDATE_PAYMENT_PAST_DUE:["Please update your payment method to avoid losing Pro."]})},"@VERSION@",{requires:["intl"]});YUI.add("timezone-helper",function(t){"use strict";t.TimezoneHelper=function(e,i,s){s?(this.tz=s,this.dst=!1):(this.tz=e.getViewer().prefs.timezonePref.offset,this.dst=e.getViewer().prefs.timezonePref.dst),this.momentObject=t.moment(i,"X"),this.momentObject.utcOffset(this.tz),this.dst&&this.momentObject.isDST()&&this.momentObject.add(1,"hour")},t.TimezoneHelper.prototype.toFormat=function(t){return this.momentObject.format(t)}},"@VERSION@",{requires:["moment"]});YUI.add("subscriptions-helper",function(o){"use strict";o.SubscriptionsHelper=function(){this.FLICKR_PRO_3_MONTH_PLAN_ID=1,this.FLICKR_PRO_1_YEAR_PLAN_ID=2,this.FLICKR_PRO_2_YEARS_PLAN_ID=3,this.FLICKR_PRO_MONTHLY_PLAN_ID=7,this.FLICKR_PRO_ANNUAL_PLAN_ID=8,this.FLICKR_PRO_ANNUAL_TRIAL=9,this.FLICKR_PRO_OLD_ANNUAL_TRIAL=10,this.FLICKR_PRO_ANNUAL_PRICE=49.99,this.FLICKR_PRO_MONTHLY_PRICE=5.99,this.subscriptionsIdByName={"pro-3month":this.FLICKR_PRO_3_MONTH_PLAN_ID,"pro-1year":this.FLICKR_PRO_1_YEAR_PLAN_ID,"pro-2year":this.FLICKR_PRO_2_YEARS_PLAN_ID,"pro-monthly":this.FLICKR_PRO_MONTHLY_PLAN_ID,"pro-annual":this.FLICKR_PRO_ANNUAL_PLAN_ID,"pro-trial":this.FLICKR_PRO_ANNUAL_TRIAL},this.subscriptionStatusMap={initiated:1,active:2,closed:3,canceled:4,failed:5,refunded:6,pending:7,subscription_canceled:8,subscription_charged_successfully:9,subscription_charged_unsuccessfully:10,subscription_expired:11,subscription_went_past_due:12,change_initiated:13,closed_pending:14},this.subscriptionsIdHasAnnualPerk={1:!1,2:!0,3:!0,4:!0,6:!1,7:!1,8:!0,9:!0,10:!0},this.cardTypeMap={1:"visa",2:"master-card",3:"discover",4:"american-express",5:"JCB"},this.paymentVendorMap={braintree:10,oldpaypal:20,digitalriver:30},this.countriesArray=[{countryCode:"US",countryName:"United States"},{countryCode:"AF",countryName:"Afghanistan"},{countryCode:"AX",countryName:"Åland"},{countryCode:"AL",countryName:"Albania"},{countryCode:"DZ",countryName:"Algeria"},{countryCode:"AS",countryName:"American Samoa"},{countryCode:"AD",countryName:"Andorra"},{countryCode:"AO",countryName:"Angola"},{countryCode:"AI",countryName:"Anguilla"},{countryCode:"AQ",countryName:"Antarctica"},{countryCode:"AG",countryName:"Antigua and Barbuda"},{countryCode:"AR",countryName:"Argentina"},{countryCode:"AM",countryName:"Armenia"},{countryCode:"AW",countryName:"Aruba"},{countryCode:"AU",countryName:"Australia"},{countryCode:"AT",countryName:"Austria"},{countryCode:"AZ",countryName:"Azerbaijan"},{countryCode:"BS",countryName:"Bahamas"},{countryCode:"BH",countryName:"Bahrain"},{countryCode:"BD",countryName:"Bangladesh"},{countryCode:"BB",countryName:"Barbados"},{countryCode:"BY",countryName:"Belarus"},{countryCode:"BE",countryName:"Belgium"},{countryCode:"BZ",countryName:"Belize"},{countryCode:"BJ",countryName:"Benin"},{countryCode:"BM",countryName:"Bermuda"},{countryCode:"BT",countryName:"Bhutan"},{countryCode:"BO",countryName:"Bolivia"},{countryCode:"BQ",countryName:"Bonaire, Sint Eustatius and Saba"},{countryCode:"BA",countryName:"Bosnia and Herzegovina"},{countryCode:"BW",countryName:"Botswana"},{countryCode:"BV",countryName:"Bouvet Island"},{countryCode:"BR",countryName:"Brazil"},{countryCode:"IO",countryName:"British Indian Ocean Territory"},{countryCode:"BN",countryName:"Brunei Darussalam"},{countryCode:"BG",countryName:"Bulgaria"},{countryCode:"BF",countryName:"Burkina Faso"},{countryCode:"BI",countryName:"Burundi"},{countryCode:"KH",countryName:"Cambodia"},{countryCode:"CM",countryName:"Cameroon"},{countryCode:"CA",countryName:"Canada"},{countryCode:"CV",countryName:"Cape Verde"},{countryCode:"KY",countryName:"Cayman Islands"},{countryCode:"CF",countryName:"Central African Republic"},{countryCode:"TD",countryName:"Chad"},{countryCode:"CL",countryName:"Chile"},{countryCode:"CN",countryName:"China"},{countryCode:"CX",countryName:"Christmas Island"},{countryCode:"CC",countryName:"Cocos (Keeling) Islands"},{countryCode:"CO",countryName:"Colombia"},{countryCode:"KM",countryName:"Comoros"},{countryCode:"CG",countryName:"Congo (Brazzaville)"},{countryCode:"CD",countryName:"Congo (Kinshasa)"},{countryCode:"CK",countryName:"Cook Islands"},{countryCode:"CR",countryName:"Costa Rica"},{countryCode:"CI",countryName:"Côte d'Ivoire"},{countryCode:"HR",countryName:"Croatia"},{countryCode:"CW",countryName:"Curaçao"},{countryCode:"CY",countryName:"Cyprus"},{countryCode:"CZ",countryName:"Czech Republic"},{countryCode:"DK",countryName:"Denmark"},{countryCode:"DJ",countryName:"Djibouti"},{countryCode:"DM",countryName:"Dominica"},{countryCode:"DO",countryName:"Dominican Republic"},{countryCode:"EC",countryName:"Ecuador"},{countryCode:"EG",countryName:"Egypt"},{countryCode:"SV",countryName:"El Salvador"},{countryCode:"GQ",countryName:"Equatorial Guinea"},{countryCode:"ER",countryName:"Eritrea"},{countryCode:"EE",countryName:"Estonia"},{countryCode:"ET",countryName:"Ethiopia"},{countryCode:"FK",countryName:"Falkland Islands"},{countryCode:"FO",countryName:"Faroe Islands"},{countryCode:"FJ",countryName:"Fiji"},{countryCode:"FI",countryName:"Finland"},{countryCode:"FR",countryName:"France"},{countryCode:"GF",countryName:"French Guiana"},{countryCode:"PF",countryName:"French Polynesia"},{countryCode:"TF",countryName:"French Southern Lands"},{countryCode:"GA",countryName:"Gabon"},{countryCode:"GM",countryName:"Gambia"},{countryCode:"GE",countryName:"Georgia"},{countryCode:"DE",countryName:"Germany"},{countryCode:"GH",countryName:"Ghana"},{countryCode:"GI",countryName:"Gibraltar"},{countryCode:"GR",countryName:"Greece"},{countryCode:"GL",countryName:"Greenland"},{countryCode:"GD",countryName:"Grenada"},{countryCode:"GP",countryName:"Guadeloupe"},{countryCode:"GU",countryName:"Guam"},{countryCode:"GT",countryName:"Guatemala"},{countryCode:"GG",countryName:"Guernsey"},{countryCode:"GN",countryName:"Guinea"},{countryCode:"GW",countryName:"Guinea-Bissau"},{countryCode:"GY",countryName:"Guyana"},{countryCode:"HT",countryName:"Haiti"},{countryCode:"HM",countryName:"Heard and McDonald Islands"},{countryCode:"HN",countryName:"Honduras"},{countryCode:"HK",countryName:"Hong Kong"},{countryCode:"HU",countryName:"Hungary"},{countryCode:"IS",countryName:"Iceland"},{countryCode:"IN",countryName:"India"},{countryCode:"ID",countryName:"Indonesia"},{countryCode:"IE",countryName:"Ireland"},{countryCode:"IM",countryName:"Isle of Man"},{countryCode:"IL",countryName:"Israel"},{countryCode:"IT",countryName:"Italy"},{countryCode:"JM",countryName:"Jamaica"},{countryCode:"JP",countryName:"Japan"},{countryCode:"JE",countryName:"Jersey"},{countryCode:"JO",countryName:"Jordan"},{countryCode:"KZ",countryName:"Kazakhstan"},{countryCode:"KE",countryName:"Kenya"},{countryCode:"KI",countryName:"Kiribati"},{countryCode:"KR",countryName:"Korea, South"},{countryCode:"KW",countryName:"Kuwait"},{countryCode:"KG",countryName:"Kyrgyzstan"},{countryCode:"LA",countryName:"Laos"},{countryCode:"LV",countryName:"Latvia"},{countryCode:"LB",countryName:"Lebanon"},{countryCode:"LS",countryName:"Lesotho"},{countryCode:"LR",countryName:"Liberia"},{countryCode:"LY",countryName:"Libya"},{countryCode:"LI",countryName:"Liechtenstein"},{countryCode:"LT",countryName:"Lithuania"},{countryCode:"LU",countryName:"Luxembourg"},{countryCode:"MO",countryName:"Macau"},{countryCode:"MK",countryName:"Macedonia"},{countryCode:"MG",countryName:"Madagascar"},{countryCode:"MW",countryName:"Malawi"},{countryCode:"MY",countryName:"Malaysia"},{countryCode:"MV",countryName:"Maldives"},{countryCode:"ML",countryName:"Mali"},{countryCode:"MT",countryName:"Malta"},{countryCode:"MH",countryName:"Marshall Islands"},{countryCode:"MQ",countryName:"Martinique"},{countryCode:"MR",countryName:"Mauritania"},{countryCode:"MU",countryName:"Mauritius"},{countryCode:"YT",countryName:"Mayotte"},{countryCode:"MX",countryName:"Mexico"},{countryCode:"FM",countryName:"Micronesia"},{countryCode:"MD",countryName:"Moldova"},{countryCode:"MC",countryName:"Monaco"},{countryCode:"MN",countryName:"Mongolia"},{countryCode:"ME",countryName:"Montenegro"},{countryCode:"MS",countryName:"Montserrat"},{countryCode:"MA",countryName:"Morocco"},{countryCode:"MZ",countryName:"Mozambique"},{countryCode:"MM",countryName:"Myanmar"},{countryCode:"NA",countryName:"Namibia"},{countryCode:"NR",countryName:"Nauru"},{countryCode:"NP",countryName:"Nepal"},{countryCode:"NL",countryName:"Netherlands"},{countryCode:"AN",countryName:"Netherlands Antilles"},{countryCode:"NC",countryName:"New Caledonia"},{countryCode:"NZ",countryName:"New Zealand"},{countryCode:"NI",countryName:"Nicaragua"},{countryCode:"NE",countryName:"Niger"},{countryCode:"NG",countryName:"Nigeria"},{countryCode:"NU",countryName:"Niue"},{countryCode:"NF",countryName:"Norfolk Island"},{countryCode:"MP",countryName:"Northern Mariana Islands"},{countryCode:"NO",countryName:"Norway"},{countryCode:"OM",countryName:"Oman"},{countryCode:"PK",countryName:"Pakistan"},{countryCode:"PW",countryName:"Palau"},{countryCode:"PS",countryName:"Palestine"},{countryCode:"PA",countryName:"Panama"},{countryCode:"PG",countryName:"Papua New Guinea"},{countryCode:"PY",countryName:"Paraguay"},{countryCode:"PE",countryName:"Peru"},{countryCode:"PH",countryName:"Philippines"},{countryCode:"PN",countryName:"Pitcairn"},{countryCode:"PL",countryName:"Poland"},{countryCode:"PT",countryName:"Portugal"},{countryCode:"PR",countryName:"Puerto Rico"},{countryCode:"QA",countryName:"Qatar"},{countryCode:"RE",countryName:"Reunion"},{countryCode:"RO",countryName:"Romania"},{countryCode:"RU",countryName:"Russian Federation"},{countryCode:"RW",countryName:"Rwanda"},{countryCode:"BL",countryName:"Saint Barthélemy"},{countryCode:"SH",countryName:"Saint Helena"},{countryCode:"KN",countryName:"Saint Kitts and Nevis"},{countryCode:"LC",countryName:"Saint Lucia"},{countryCode:"MF",countryName:"Saint Martin (French part)"},{countryCode:"PM",countryName:"Saint Pierre and Miquelon"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines"},{countryCode:"WS",countryName:"Samoa"},{countryCode:"SM",countryName:"San Marino"},{countryCode:"ST",countryName:"Sao Tome and Principe"},{countryCode:"SA",countryName:"Saudi Arabia"},{countryCode:"SN",countryName:"Senegal"},{countryCode:"RS",countryName:"Serbia"},{countryCode:"SC",countryName:"Seychelles"},{countryCode:"SL",countryName:"Sierra Leone"},{countryCode:"SG",countryName:"Singapore"},{countryCode:"SX",countryName:"Sint Maarten (Dutch part)"},{countryCode:"SK",countryName:"Slovakia"},{countryCode:"SI",countryName:"Slovenia"},{countryCode:"SB",countryName:"Solomon Islands"},{countryCode:"SO",countryName:"Somalia"},{countryCode:"ZA",countryName:"South Africa"},{countryCode:"GS",countryName:"South Georgia and South Sandwich Islands"},{countryCode:"SS",countryName:"South Sudan"},{countryCode:"ES",countryName:"Spain"},{countryCode:"LK",countryName:"Sri Lanka"},{countryCode:"SD",countryName:"Sudan"},{countryCode:"SR",countryName:"Suriname"},{countryCode:"SJ",countryName:"Svalbard and Jan Mayen Islands"},{countryCode:"SZ",countryName:"Swaziland"},{countryCode:"SE",countryName:"Sweden"},{countryCode:"CH",countryName:"Switzerland"},{countryCode:"TW",countryName:"Taiwan"},{countryCode:"TJ",countryName:"Tajikistan"},{countryCode:"TZ",countryName:"Tanzania"},{countryCode:"TH",countryName:"Thailand"},{countryCode:"TL",countryName:"Timor-Leste"},{countryCode:"TG",countryName:"Togo"},{countryCode:"TK",countryName:"Tokelau"},{countryCode:"TO",countryName:"Tonga"},{countryCode:"TT",countryName:"Trinidad and Tobago"},{countryCode:"TN",countryName:"Tunisia"},{countryCode:"TR",countryName:"Turkey"},{countryCode:"TM",countryName:"Turkmenistan"},{countryCode:"TC",countryName:"Turks and Caicos Islands"},{countryCode:"TV",countryName:"Tuvalu"},{countryCode:"UG",countryName:"Uganda"},{countryCode:"UA",countryName:"Ukraine"},{countryCode:"AE",countryName:"United Arab Emirates"},{countryCode:"GB",countryName:"United Kingdom"},{countryCode:"UM",countryName:"United States Minor Outlying Islands"},{countryCode:"UY",countryName:"Uruguay"},{countryCode:"UZ",countryName:"Uzbekistan"},{countryCode:"VU",countryName:"Vanuatu"},{countryCode:"VA",countryName:"Vatican City"},{countryCode:"VE",countryName:"Venezuela"},{countryCode:"VN",countryName:"Vietnam"},{countryCode:"VG",countryName:"Virgin Islands, British"},{countryCode:"VI",countryName:"Virgin Islands, U.S."},{countryCode:"WF",countryName:"Wallis and Futuna Islands"},{countryCode:"EH",countryName:"Western Sahara"},{countryCode:"YE",countryName:"Yemen"},{countryCode:"ZM",countryName:"Zambia"},{countryCode:"ZW",countryName:"Zimbabwe"}]},o.SubscriptionsHelper.prototype.canSeeAnnualProPerks=function(e,t){if(t){var n=t.toJSON();if(!e.getValue("isPro"))return!1;if(n.oneTimePro.isOneTimePro)return!0;if(e.getValue("isPro")){var r=o.Array.filter(n.subscriptions,function(e){return e.status===this.subscriptionStatusMap.active||e.status===this.subscriptionStatusMap.closed&&void 0!==e.effectiveEndDate&&e.effectiveEndDate.isAfter(o.moment())||e.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this));return!(!r||!r[0])&&this.subscriptionsIdHasAnnualPerk[r[0].type]}}},o.SubscriptionsHelper.prototype.canPlanIdSeeAnnualPerks=function(o){return this.subscriptionsIdHasAnnualPerk[o]},o.SubscriptionsHelper.prototype.convertDesiredPlan=function(o,e,t,n){var r;if(t=!0,e=!1,"pro-3month"===o||"pro-1year"===o||"pro-2year"===o){if(e)r=o;else if(t)switch(o){case"pro-3month":r="pro-monthly";break;case"pro-1year":case"pro-2year":r="pro-annual"}}else if(t)r=o;else if(e)switch(o){case"pro-monthly":r="pro-3month";break;case"pro-annual":r="pro-1year"}return r},o.SubscriptionsHelper.prototype.getPlanIdWithPlanName=function(o){var e=this.FLICKR_PRO_ANNUAL_PLAN_ID;return void 0!==this.subscriptionsIdByName[o]&&(e=this.subscriptionsIdByName[o]),e},o.SubscriptionsHelper.prototype.canPurchaseAtLeastOnePlan=function(o){var e=[];return o&&(e=o.filter(function(o){return 1===o.canPurchase})),e.length>0},o.SubscriptionsHelper.prototype.canPurchaseThisPlanId=function(o,e){var t=[];return o&&e&&(t=e.filter(function(e){return e.planId===o})),t.length>0},o.SubscriptionsHelper.prototype.getNewProPlans=function(o){if(o)return o.filter(function(o){return"FlickrNewPro"===o.familyName})},o.SubscriptionsHelper.prototype.getOldProPlans=function(o){if(o)return o.filter(function(o){return"FlickrPro"===o.familyName})},o.SubscriptionsHelper.prototype.getPlanWithIdInPlansList=function(o){},o.SubscriptionsHelper.prototype.sanitizeCouponCode=function(o){var e=!1;if(o){if(e=o.trim(),o.length<=1)return!1;if(!e.match(/^[\w\-]+$/))return!1}return e},o.SubscriptionsHelper.prototype.convertLocaleToPaypalFormat=function(o){if(o){return{"de-DE":"de_DE","en-US":"en_US","es-US":"es_ES","fr-FR":"fr_FR","id-ID":"id_ID","it-IT":"it_IT","ko-KR":"ko_KR","pt-BR":"pt_PT","vi-VN":"en_US","zh-Hant-HK":"zh_HK"}[o]}},o.SubscriptionsHelper.prototype.getNiceCardType=function(o){return this.cardTypeMap[o]},o.SubscriptionsHelper.prototype.getPaymentVendorType=function(o){return this.paymentVendorMap[o]},o.SubscriptionsHelper.prototype.isPaymentVendorBraintree=function(o){return o===this.paymentVendorMap.braintree},o.SubscriptionsHelper.prototype.isPaymentVendorDigitalRiver=function(o){return o===this.paymentVendorMap.digitalriver},o.SubscriptionsHelper.prototype.hasYearlyLegalNotice=function(o){return this.subscriptionsIdHasAnnualPerk[o]},o.SubscriptionsHelper.prototype.log=function(e,t){!YUI.Env.isServer&&o.config.win.beaconError&&o.config.win.beaconError("[flickr-add-payment-method] "+e,o.config.win.location.href,t||{})},o.SubscriptionsHelper.prototype.beaconTransactionStep=function(e,t){!YUI.Env.isServer&&o.config.win.beaconError&&o.config.win.beaconError("[PRO] "+e,o.config.win.location.href,t||{})},o.SubscriptionsHelper.prototype.doesPlanIdHaveTrial=function(o){return o===this.FLICKR_PRO_ANNUAL_PLAN_ID||o===this.FLICKR_PRO_1_YEAR_PLAN_ID||o===this.FLICKR_PRO_2_YEARS_PLAN_ID},o.SubscriptionsHelper.prototype.canPurchaseTrialPlan=function(e,t){if(e&&t){var n;return n=e.getValue("products"),o.Array.filter(n,function(o){return o.planId===this.FLICKR_PRO_ANNUAL_TRIAL&&1===o.canPurchase||o.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL&&1===o.canPurchase}.bind(this)).length>0}},o.SubscriptionsHelper.prototype.getTrialLength=function(){return 45},o.SubscriptionsHelper.prototype.formatSubscriptionModels=function(e){var t=e;return!t||!t.toJSON()||!t.toJSON().subscriptions||!t.toJSON().subscriptions instanceof Array||0===t.toJSON().subscriptions.length?[]:o.Array.map(t.toJSON().subscriptions,function(o){var e,t=o.amountBilled?o.amountBilled.toFixed(2):"0.00",n=o.pendingPrice?o.pendingPrice.toFixed(2):"0.00";return e=o.status!==this.subscriptionStatusMap.closed&&"object"==typeof o.effectiveEndDate&&"object"==typeof o.nextBillingDate?o.nextBillingDate.format("LL"):"",{type:o.type,startDate:"object"==typeof o.startDate?o.startDate.format("LL"):"",renewDate:e,nextBillingDate:o.nextBillingDate,id:o.id,name:o.prettyName,duration:o.prettyNameDuration,price:t,pendingPrice:n,status:o.status,isClosed:o.status===this.subscriptionStatusMap.closed,isPastDue:o.status===this.subscriptionStatusMap.subscription_went_past_due,effectiveEndDate:o.effectiveEndDate,paymentVendorType:o.paymentVendorType,isDigitalRiverSubscription:this.isPaymentVendorDigitalRiver(o.paymentVendorType),transactions:o.transactions}}.bind(this))},o.SubscriptionsHelper.prototype.getActiveAndPendingSubscriptions=function(e){var t,n;return t=o.Array.filter(this.formatSubscriptionModels(e),function(o){return o.status===this.subscriptionStatusMap.pending}.bind(this)),n=o.Array.filter(this.formatSubscriptionModels(e),function(e){return e.status===this.subscriptionStatusMap.active||e.status===this.subscriptionStatusMap.closed&&void 0!==e.effectiveEndDate&&e.effectiveEndDate.isAfter(o.moment())||e.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)),{activeSubs:n,pendingSubs:t}},o.SubscriptionsHelper.prototype.isUserOnActiveButClosedPro=function(e){var t=this.getActiveAndPendingSubscriptions(e);return o.Array.filter(t.activeSubs,function(o){return o.status!==this.subscriptionStatusMap.active}.bind(this)).length>=1&&t.pendingSubs&&0===t.pendingSubs.length},o.SubscriptionsHelper.prototype.isUserCurrentlyOnADigitalRiverSub=function(o){var e=this.getActiveAndPendingSubscriptions(o),t=!1;if(e.activeSubs&&e.activeSubs.length>0){var n=e.activeSubs[0];if(e.pendingSubs&&e.pendingSubs.length>0){var r=e.pendingSubs[0];r&&(t=r.isDigitalRiverSubscription)}else t=n.isDigitalRiverSubscription}return t},o.SubscriptionsHelper.prototype.isUserPastDue=function(e){var t=[],n=this.getActiveAndPendingSubscriptions(e);return(t=o.Array.filter(n.activeSubs,function(o){return o.status===this.subscriptionStatusMap.subscription_went_past_due}.bind(this)))&&t.length>=1},o.SubscriptionsHelper.prototype.hasPurchasedTrialInThePast=function(e){var t=e.toJSON();return o.Array.filter(t,function(o){return o.planId===this.FLICKR_PRO_ANNUAL_TRIAL||o.planId===this.FLICKR_PRO_OLD_ANNUAL_TRIAL}.bind(this)).length>0},o.SubscriptionsHelper.prototype.isOnActiveTrial=function(o){var e=this.getActiveAndPendingSubscriptions(o),t=!1;return e&&e.activeSubs&&e.activeSubs.length>0&&(t=e.activeSubs[0].type===this.FLICKR_PRO_ANNUAL_TRIAL||e.activeSubs[0].type===this.FLICKR_PRO_OLD_ANNUAL_TRIAL),t},o.SubscriptionsHelper.prototype.isOneTimePro=function(o){return o.toJSON().oneTimePro.isOneTimePro},o.SubscriptionsHelper.prototype.getShopperCurrencyAndLocale=function(e){var t="US",n="en_US",r="USD",a=!1;if(!e&&o.config.flickr.geo?(o.config.flickr.geo.countryCode&&(t=o.config.flickr.geo.countryCode),o.config.flickr.geo.eu&&(a=o.config.flickr.geo.eu)):e&&(t=e.countryCode||"US",a=e.eu||!1),a)"GB"===t?(n="en_IE",r="GBP"):(n="en_IE",r="EUR");else switch(t){case"US":n="en_US",r="USD";break;case"CA":n="en_IE",r="CAD";break;default:n="en_IE",r="USD"}return{locale:n,currency:r}},o.SubscriptionsHelper.prototype.canUserSeeDigitalRiver=function(o){return!0},o.SubscriptionsHelper.prototype.getPriceWithCurrency=function(o,e,t){var n=t.replace("_","-");return new Intl.NumberFormat(n,{style:"currency",currency:e}).format(o)},o.SubscriptionsHelper.prototype.doesCountryRequiresSignedInGifting=function(o){return!(!o||!o.countryCode||"VN"!==o.countryCode)}},"@VERSION@",{requires:["moment","timezone-helper","array-extras"],optional:[]});YUI.add("past-due-banner-view",function(e,i){require("hermes-core/flog")(i),new e.SubscriptionsHelper;e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},loadState:function(){return this.appContext.getViewer().signedIn?this.appContext.getModel("subscription-history-list-models",this.appContext.getViewer().nsid).then(function(i){var t=new e.SubscriptionsHelper;this.set("isPastDue",t.isUserPastDue(i))}.bind(this)):(this.set("isPastDue",!1),e.Promise.resolve())},buildContainer:function(){var e="<p>"+this.intlMessage({intlName:"featured-banner.WE_HAD_TROUBLE_PAYMENT"});return e+=' <a href="/account">'+this.intlMessage({intlName:"featured-banner.PLEASE_UPDATE_PAYMENT_PAST_DUE"})+"</a>",e+="</p>",this.setContainerWithTemplate("basic-banner",{message:e,additionalClasses:"head-banner-style"}),this},activate:function(){var e=this.get("container");this.registerEventHandler(e.one(".button.dismiss").on("click",this.dismissBanner.bind(this))),this.fire("activated")},dismissBanner:function(i){var t=new Date;t.setTime(t.getTime()+828e5),this.appContext.setCookie({cookieName:e.config.flickr.banners.dismiss_past_due_banner_name,cookieValue:1,expires:t,path:"/"}),this.fire("dismiss")},isABlacklistedView:function(){var e=this.appContext.flapp.get("activeView").name;return!!(e&&["products-pro-2018-view","account-settings-view"].indexOf(e)>-1)},canShowBanner:function(){var i=!1;return this.appContext.getViewer().signedIn&&this.get("isPastDue")&&!this.appContext.getCookie(e.config.flickr.banners.dismiss_past_due_banner_name)&&!this.isABlacklistedView()&&(i=!0),i}})},"@VERSION@",{requires:["flickr-view","user-limits-helper","person-models","person-profile-models","subscriptions-helper"],langBundles:["featured-banner"]});YUI.add("math-helper",function(e){e.MathHelper=function(e){return{seedRandom:function(e){return 0+1*((e=(9301*e+49297)%233280)/233280)}}}},"@VERSION@",{requires:[]});