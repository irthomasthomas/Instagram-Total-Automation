YUI.add("hermes-template-fluid-droparound",function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,a,l){return" html"},3:function(n,e,t,a,l){return" subview-droparound"},5:function(n,e,t,a,l){return" menu"},7:function(n,e,t,a,l){return" auto-size"},9:function(n,e,t,a,l){var i,s=null!=e?e:{},r=t.helperMissing,o=n.escapeExpression;return"max-height: "+o("function"==typeof(i=null!=(i=t.staticHeight||(null!=e?e.staticHeight:e))?i:r)?i.call(s,{name:"staticHeight",hash:{},data:l}):i)+"px; min-height: "+o("function"==typeof(i=null!=(i=t.staticHeight||(null!=e?e.staticHeight:e))?i:r)?i.call(s,{name:"staticHeight",hash:{},data:l}):i)+"px; "},11:function(n,e,t,a,l){var i;return"width: "+n.escapeExpression("function"==typeof(i=null!=(i=t.staticWidth||(null!=e?e.staticWidth:e))?i:t.helperMissing)?i.call(null!=e?e:{},{name:"staticWidth",hash:{},data:l}):i)+"px;"},13:function(n,e,t,a,l){return"position: fixed;"},15:function(n,e,t,a,l){return"hide-head"},17:function(n,e,t,a,l){var i,s,r=null!=e?e:{},o=t.helperMissing;return'\t\t\t<div class="content text-only'+(null!=(i=t.if.call(r,null!=e?e.autoSizeToContent:e,{name:"if",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l}))?i:"")+'" style="'+(null!=(i=(t.ifDefined||e&&e.ifDefined||o).call(r,null!=e?e.contentPadding:e,{name:"ifDefined",hash:{},fn:n.program(18,l,0),inverse:n.noop,data:l}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression("function"==typeof(s=null!=(s=t.textMessage||(null!=e?e.textMessage:e))?s:o)?s.call(r,{name:"textMessage",hash:{},data:l}):s)+"\n\t\t\t</div>\n"},18:function(n,e,t,a,l){var i;return"padding: "+n.escapeExpression("function"==typeof(i=null!=(i=t.contentPadding||(null!=e?e.contentPadding:e))?i:t.helperMissing)?i.call(null!=e?e:{},{name:"contentPadding",hash:{},data:l}):i)+"px;"},20:function(n,e,t,a,l){var i,s=null!=e?e:{},r=t.helperMissing;return'\t\t\t<div class="content html-only'+(null!=(i=t.if.call(s,null!=e?e.autoSizeToContent:e,{name:"if",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l}))?i:"")+'" style="'+(null!=(i=(t.ifDefined||e&&e.ifDefined||r).call(s,null!=e?e.contentPadding:e,{name:"ifDefined",hash:{},fn:n.program(18,l,0),inverse:n.noop,data:l}))?i:"")+'">\n\t\t\t\t'+n.escapeExpression((t.renderTrustedMarkup||e&&e.renderTrustedMarkup||r).call(s,null!=e?e.htmlMessage:e,{name:"renderTrustedMarkup",hash:{},data:l}))+"\n\t\t\t</div>\n"},22:function(n,e,t,a,l){var i,s=null!=e?e:{};return'\t\t\t<div class="content subview'+(null!=(i=t.if.call(s,null!=e?e.autoSizeToContent:e,{name:"if",hash:{},fn:n.program(7,l,0),inverse:n.noop,data:l}))?i:"")+'" style="'+(null!=(i=(t.ifDefined||e&&e.ifDefined||t.helperMissing).call(s,null!=e?e.contentPadding:e,{name:"ifDefined",hash:{},fn:n.program(18,l,0),inverse:n.noop,data:l}))?i:"")+'"></div>\n'},24:function(n,e,t,a,l,i,s){var r,o=null!=e?e:{};return'\t\t\t<div class="content menu" style="'+(null!=(r=(t.ifDefined||e&&e.ifDefined||t.helperMissing).call(o,null!=e?e.contentPadding:e,{name:"ifDefined",hash:{},fn:n.program(18,l,0,i,s),inverse:n.noop,data:l}))?r:"")+'">\n\t\t\t\t<ul role="menu">\n'+(null!=(r=t.each.call(o,null!=e?e.menuItems:e,{name:"each",hash:{},fn:n.program(25,l,0,i,s),inverse:n.noop,data:l}))?r:"")+"\t\t\t\t</ul>\n\t\t\t</div>\n"},25:function(n,e,t,a,l,i,s){var r;return null!=(r=t.if.call(null!=e?e:{},null!=s[1]?s[1].multiSelect:s[1],{name:"if",hash:{},fn:n.program(26,l,0,i,s),inverse:n.program(31,l,0,i,s),data:l}))?r:""},26:function(n,e,t,a,l){var i,s,r=null!=e?e:{};return'\t\t\t\t\t\t\t<li role="menuitem" '+(null!=(i=t.if.call(r,null!=e?e.selected:e,{name:"if",hash:{},fn:n.program(27,l,0),inverse:n.noop,data:l}))?i:"")+'>\n\t\t\t\t\t\t\t\t<span class="selection"></span>\n\t\t\t\t\t\t\t\t'+n.escapeExpression("function"==typeof(s=null!=(s=t.text||(null!=e?e.text:e))?s:t.helperMissing)?s.call(r,{name:"text",hash:{},data:l}):s)+(null!=(i=t.if.call(r,null!=e?e.itemFlag:e,{name:"if",hash:{},fn:n.program(29,l,0),inverse:n.noop,data:l}))?i:"")+"\n\t\t\t\t\t\t\t</li>\n"},27:function(n,e,t,a,l){return'class="selected"'},29:function(n,e,t,a,l){var i,s=null!=e?e:{},r=t.helperMissing,o=n.escapeExpression;return" - "+o("function"==typeof(i=null!=(i=t.itemFlag||(null!=e?e.itemFlag:e))?i:r)?i.call(s,{name:"itemFlag",hash:{},data:l}):i)+'<div class="label-new">'+o("function"==typeof(i=null!=(i=t.itemFlag||(null!=e?e.itemFlag:e))?i:r)?i.call(s,{name:"itemFlag",hash:{},data:l}):i)+"</div>"},31:function(n,e,t,a,l){var i,s,r=null!=e?e:{};return'\t\t\t\t\t\t\t<li role="menuitem" '+(null!=(i=t.if.call(r,null!=e?e.isSelected:e,{name:"if",hash:{},fn:n.program(32,l,0),inverse:n.noop,data:l}))?i:"")+" "+(null!=(i=t.if.call(r,null!=e?e.href:e,{name:"if",hash:{},fn:n.noop,inverse:n.program(34,l,0),data:l}))?i:"")+">\n\t\t\t\t\t\t\t\t"+(null!=(i=t.if.call(r,null!=e?e.href:e,{name:"if",hash:{},fn:n.program(36,l,0),inverse:n.noop,data:l}))?i:"")+"\n\t\t\t\t\t\t\t\t\t"+n.escapeExpression("function"==typeof(s=null!=(s=t.text||(null!=e?e.text:e))?s:t.helperMissing)?s.call(r,{name:"text",hash:{},data:l}):s)+(null!=(i=t.if.call(r,null!=e?e.itemFlag:e,{name:"if",hash:{},fn:n.program(39,l,0),inverse:n.noop,data:l}))?i:"")+"\n\t\t\t\t\t\t\t\t"+(null!=(i=t.if.call(r,null!=e?e.href:e,{name:"if",hash:{},fn:n.program(41,l,0),inverse:n.noop,data:l}))?i:"")+"\n\t\t\t\t\t\t\t</li>\n"},32:function(n,e,t,a,l){return'class="selected-item"'},34:function(n,e,t,a,l){return'tabindex="0"'},36:function(n,e,t,a,l){var i,s,r=null!=e?e:{};return'<a href="'+n.escapeExpression("function"==typeof(s=null!=(s=t.href||(null!=e?e.href:e))?s:t.helperMissing)?s.call(r,{name:"href",hash:{},data:l}):s)+'"'+(null!=(i=t.if.call(r,null!=e?e.className:e,{name:"if",hash:{},fn:n.program(37,l,0),inverse:n.noop,data:l}))?i:"")+">"},37:function(n,e,t,a,l){var i;return' class="'+n.escapeExpression("function"==typeof(i=null!=(i=t.className||(null!=e?e.className:e))?i:t.helperMissing)?i.call(null!=e?e:{},{name:"className",hash:{},data:l}):i)+'"'},39:function(n,e,t,a,l){var i;return'<div class="label-new">'+n.escapeExpression("function"==typeof(i=null!=(i=t.itemFlag||(null!=e?e.itemFlag:e))?i:t.helperMissing)?i.call(null!=e?e:{},{name:"itemFlag",hash:{},data:l}):i)+"</div>"},41:function(n,e,t,a,l){return"</a>"},43:function(n,e,t,a,l){return"hide-foot"},45:function(n,e,t,a,l){return'\t\t<div class="droparrow up"></div>\n'},compiler:[7,">= 4.0.0"],main:function(n,e,t,a,l,i,s){var r,o,u=null!=e?e:{},f=t.helperMissing,c=n.escapeExpression;return'<div class="droparound'+(null!=(r=t.if.call(u,null!=e?e.htmlMessage:e,{name:"if",hash:{},fn:n.program(1,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.subview:e,{name:"if",hash:{},fn:n.program(3,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.menuItems:e,{name:"if",hash:{},fn:n.program(5,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.autoSizeToContent:e,{name:"if",hash:{},fn:n.program(7,l,0,i,s),inverse:n.noop,data:l}))?r:"")+" "+c("function"==typeof(o=null!=(o=t.classList||(null!=e?e.classList:e))?o:f)?o.call(u,{name:"classList",hash:{},data:l}):o)+'"\nstyle="'+(null!=(r=t.if.call(u,null!=e?e.staticHeight:e,{name:"if",hash:{},fn:n.program(9,l,0,i,s),inverse:n.noop,data:l}))?r:"")+"\n"+(null!=(r=t.if.call(u,null!=e?e.staticWidth:e,{name:"if",hash:{},fn:n.program(11,l,0,i,s),inverse:n.noop,data:l}))?r:"")+"\n"+(null!=(r=t.if.call(u,null!=e?e.positionFixed:e,{name:"if",hash:{},fn:n.program(13,l,0,i,s),inverse:n.noop,data:l}))?r:"")+'">\n\t<div class="head '+(null!=(r=t.unless.call(u,null!=e?e.headContent:e,{name:"unless",hash:{},fn:n.program(15,l,0,i,s),inverse:n.noop,data:l}))?r:"")+'">\n\t\t'+c("function"==typeof(o=null!=(o=t.headContent||(null!=e?e.headContent:e))?o:f)?o.call(u,{name:"headContent",hash:{},data:l}):o)+'\n\t</div>\n\t<div class="body">\n'+(null!=(r=t.if.call(u,null!=e?e.textMessage:e,{name:"if",hash:{},fn:n.program(17,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.htmlMessage:e,{name:"if",hash:{},fn:n.program(20,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.subview:e,{name:"if",hash:{},fn:n.program(22,l,0,i,s),inverse:n.noop,data:l}))?r:"")+(null!=(r=t.if.call(u,null!=e?e.menuItems:e,{name:"if",hash:{},fn:n.program(24,l,0,i,s),inverse:n.noop,data:l}))?r:"")+'\t</div>\n\t<div class="foot '+(null!=(r=t.unless.call(u,null!=e?e.footContent:e,{name:"unless",hash:{},fn:n.program(43,l,0,i,s),inverse:n.noop,data:l}))?r:"")+'">\n\t\t'+c("function"==typeof(o=null!=(o=t.footContent||(null!=e?e.footContent:e))?o:f)?o.call(u,{name:"footContent",hash:{},data:l}):o)+"\n\t</div>\n"+(null!=(r=t.if.call(u,null!=e?e.showDropArrow:e,{name:"if",hash:{},fn:n.program(45,l,0,i,s),inverse:n.noop,data:l}))?r:"")+"</div>\n"},useData:!0,useDepths:!0}),a={};n.Array.each([],function(e){var t=n.Template.get("hermes/"+e);t&&(a[e]=t)}),n.Template.register("hermes/fluid-droparound",function(e,l){return l=l||{},l.partials=l.partials?n.merge(a,l.partials):a,t(e,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-droparound-view",function(e,t){"use strict";var r,i,n,o=require("hermes-core/flog")(t);r={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},i={supportsTransform:!1,droparound:{height:0,width:0}},n=function(e,t,r){var i,n,o,a,s,l=e.x,u=e.y,c=e.width,d=e.height,h=e.viewportX,g=t.width,v=t.height,f=r.height,p=r.width,b=r.preferredHorizontalOrientation,m=r.preferredVerticalOrientation,A=u<v/2,w=l<g/2;return"down"===m&&(A=!0),"up"===m&&(A=!1),"right"===b&&(w=!0),"left"===b&&(w=!1),r.ignoreBoundary||(f>h&&(A=!0),u+d+f<h&&(A=!1)),A?(a=u+d,s=u+d+f,i={vertical:"down"},w?(n=l,o=l+p,i.horizontal="right"):(n=l-p+c,o=l-c,i.horizontal="left")):(a=u-f,s=u,i={vertical:"up"},w?(n=l,o=l+p,i.horizontal="right"):(n=l-p+c,o=l-c,i.horizontal="left")),{coords:[n,o,a,s],orientation:i}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return this.get("textMessage")||this.get("htmlMessage")||this.get("subview")||this.get("menuItems")?(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerWithTemplate("fluid-droparound",{textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),multiSelect:this.get("multiSelect"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent"),contentPadding:this.get("contentPadding")}),this.appendAndPosition(),this):(o.warn("requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this)},activate:function(){var t=this.get("container"),i=this;e.OverlayManager.DroparoundOverlay.add(this),e.OverlayManager.DroparoundOverlay.setOverlayStyle({overlayClassList:this.get("overlayClassList"),hideModalOverlay:this.get("hideModalOverlay"),invisibleOverlay:this.get("invisibleOverlay")}),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){"popstate"===e.src&&e.prevVal&&e.newVal&&(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)||i.close(e)})),this.get("useDefaultKeyboardNavigation")&&e.use("keyboard-manager",function(e){i.registerEventHandler(t.on("keydown",i.keyboardNavigation,i))});var n=this.get("anchorElement"),o=this.get("keyboardAnchorElement");return o||(o=n.hasAttribute("aria-haspopup")?n:n.ancestor("[aria-haspopup=true]")),o&&(this.set("keyboardAnchorElement",o),this.get("keyboardAnchorElement").setAttribute("aria-expanded","true"),this.registerEventHandler(o.on("key",this.enterDroparound,"down:40",this))),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(t.one(r.css.menuContent).delegate(["click","keydown"],function(e){"click"!==e.type&&13!==e.keyCode||this.onMenuItemClick(e)}.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.get("preventPageScrollOnScroll")&&this.registerEventHandler(t.on("mousewheel",this.preventPageScroll.bind(this))),this.fire("activated"),this},enterDroparound:function(e){var t=this.get("container").one("ul li");t&&(e.preventDefault(),t.focus())},keyboardNavigation:function(e){var t=e.keyCode,r=38===t||9===t&&e.shiftKey,i=40===t||9===t&&!e.shiftKey,n=e.target.ancestor("li",!0);if(!this.appContext.getKeyboardManager().inputHasFocus())if(r&&n&&n.previous("li"))e.preventDefault(),this.focusOnPreviousItem(e);else if(i)e.preventDefault(),n&&n.next("li")&&this.focusOnNextItem(e);else if(27===t||r){e.preventDefault();var o=this.get("keyboardAnchorElement");o&&(this.close(),o.focus(),o.removeClass("no-outline"))}},focusOnPreviousItem:function(e){var t=e.target.ancestor("li",!0);if(t){var r=t.previous("li");r&&(r.one("a")?r.one("a").focus():r.focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li",!0);if(t){var r=t.next("li");r&&(r.one("a")?r.one("a").focus():r.focus())}},getDroparoundContainer:function(){return this.get("container")?this.get("container").one(r.css.droparoundContainer):null},loadSubview:function(){var t,i=!1,n=this.get("subview"),o=this;this.get("container").one(r.css.subviewContent).appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),t=setTimeout(function(){i=!0},40),this.loading=!0,n.appContext=o.appContext,n.set("isActiveViewAgnostic",!0),n.initialize().then(function(e){clearTimeout(t),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(t){var i=this,n=this.get("container").one(r.css.subviewContent);this.loading&&(this.loading=!1,n.one(".flickr-balls").remove(!0),n.appendChild(t.get("container")),t.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&i.fire.apply(i,e.details)}),t.normalizedActivate(),t.recursivelyActivateSubviews(),i.appendAndPosition(),i.registerEventHandler(i.get("subview").on("actionClick",e.bind(i.handleAction,i))))},onMenuItemClick:function(e){var t,i,n;(t=e.target.ancestor("li",!0))&&-1!==(i=this.get("container").one(r.css.menuContent).all("li").indexOf(t))&&(n=this.get("menuItems")[i],this.get("multiSelect")&&(n.selected=!n.selected,t.toggleClass("selected")),this.fire("selected",{menuItemIndex:i,menuItem:n,origEvent:e}))},appendAndPosition:function(t){var n=e.one(r.css.destinationContainer),o=this.get("container").one(r.css.droparoundContainer);n&&(n.append(this.get("container")),i.droparound.width=this.get("width")||o.getComputedStyle("width"),i.droparound.height=this.get("height")||o.getComputedStyle("height"),this.repositionToElement(t||this.get("anchorElement")))},updateTextMessage:function(e){e&&""!==e&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&""!==e&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(r){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(r)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.handleScroll.bind(this)))},handleScroll:function(t){var r,i=this.get("startingScrollPoint");i?(r=e.config.win.pageYOffset,(i+this.get("closeOnScrollDistance")<r||i-this.get("closeOnScrollDistance")>r)&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(e,t){var i,o=this.get("container"),a=this.get("positionFixed"),s=o.one(".droparound"),l=this.get("showDropArrow")?s.one(r.css.droparrow):void 0,u=s.one(r.css.droparoundContent),c=u.get("offsetWidth"),d=u.get("offsetHeight"),h=l?l.get("offsetHeight"):0,g=e.getXY(),v=g[0],f=g[1],p=e.getDOMNode().getBoundingClientRect(),b={width:s.get("offsetWidth"),height:s.get("offsetHeight")};b.ignoreBoundary=!!t,this.get("preferLeft")&&(b.preferredHorizontalOrientation="left"),this.get("preferRight")&&(b.preferredHorizontalOrientation="right"),this.get("preferTop")&&(b.preferredVerticalOrientation="up"),this.get("preferBottom")&&(b.preferredVerticalOrientation="down"),(!this.anchorCoords||0!==this.x&&0!==this.y)&&(this.anchorCoords={x:a?p.left:v,y:a?p.top:f,width:e.get("offsetWidth"),height:e.get("offsetHeight"),viewportX:e.getDOMNode().getBoundingClientRect().top||0});var m=n(this.anchorCoords,{width:this.appContext.viewportData.getWidth(),height:this.appContext.viewportData.getHeight()},b);"down"===m.orientation.vertical?m.coords[2]+=h-this.get("anchorOffsetVertical"):m.coords[2]-=h+this.get("anchorOffsetVertical"),"right"===m.orientation.horizontal?m.coords[0]-=this.get("anchorOffsetHorizontal"):m.coords[0]+=this.get("anchorOffsetHorizontal"),s.setStyles({left:m.coords[0],top:m.coords[2]}),l&&(l.removeClass("down").removeClass("up").removeClass("left").removeClass("right").addClass(m.orientation.vertical),"left"===m.orientation.horizontal?l.setStyles({right:10+this.get("mirrorArrowAdjustment"),left:"auto"}):l.setStyles({left:10+this.get("mirrorArrowAdjustment")})),this.get("menuItems")||this.get("autoSizeToContent")||(i={width:c+"px",height:d+"px"},u.setStyles(i))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0;var r=this.get("keyboardAnchorElement");r&&(r.setAttribute("aria-expanded","false"),r.focus(),r.addClass("no-outline")),this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},preventPageScroll:function(e){var t,r,i=this.get("container"),n=e.target,o=!1;if(i.contains(n)){for(;n!==i&&!o;)"hidden"===n.getStyle("overflow")||"visible"===n.getStyle("overflow")||n.get("offsetHeight")>=n.get("scrollHeight")?n=n.get("parentNode"):o=!0;o&&(t=e.wheelDelta<0,((r=n.getDOMNode()).scrollTop<=0&&!t||r.scrollTop+r.offsetHeight>=r.scrollHeight&&t)&&e.preventDefault())}}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t,r){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},keyboardAnchorElement:{value:null},useDefaultKeyboardNavigation:{value:!0},showDropArrow:{value:!0,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:0,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:void 0,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preferRight:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,r){return e.AttributeHelpers.validateInteger(t)},setter:function(t,r){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,r){return e.AttributeHelpers.validateString(t)},setter:function(t,r){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},forceRight:{value:null},autoSizeToContent:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},multiSelect:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}},preventPageScrollOnScroll:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,r){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","hermes-template-fluid-droparound","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});YUI.add("hermes-template-fluid-share-embedr-code",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var r,i=null!=a?a:{},s=n.helperMissing;return(null!=(r=(n.ifCond||a&&a.ifCond||s).call(i,null!=(r=null!=a?a.displayOptions:a)?r.header:r,"===","true",{name:"ifCond",hash:{},fn:e.program(2,t,0),inverse:e.noop,data:t}))?r:"")+(null!=(r=(n.ifCond||a&&a.ifCond||s).call(i,null!=(r=null!=a?a.displayOptions:a)?r.footer:r,"===","true",{name:"ifCond",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t}))?r:"")+(null!=(r=n.unless.call(i,null!=a?a.showSlideshowOption:a,{name:"unless",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t}))?r:"")},2:function(e,a,n,l,t){return'data-header="true" '},4:function(e,a,n,l,t){return'data-footer="true" '},6:function(e,a,n,l,t){var r;return null!=(r=(n.ifCond||a&&a.ifCond||n.helperMissing).call(null!=a?a:{},null!=(r=null!=a?a.displayOptions:a)?r.context:r,"===","true",{name:"ifCond",hash:{},fn:e.program(7,t,0),inverse:e.noop,data:t}))?r:""},7:function(e,a,n,l,t){return'data-context="true" '},9:function(e,a,n,l,t){return'data-vr="true" '},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,t){var r,i,s=null!=a?a:{},o=n.helperMissing,u="function",d=e.escapeExpression;return'<a data-flickr-embed="true" '+(null!=(r=(n.isFlipped||a&&a.isFlipped||o).call(s,"enable-share-restyle",{name:"isFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t}))?r:"")+(null!=(r=(n.ifCond||a&&a.ifCond||o).call(s,null!=(r=null!=a?a.displayOptions:a)?r.vr:r,"===","true",{name:"ifCond",hash:{},fn:e.program(9,t,0),inverse:e.noop,data:t}))?r:"")+' href="'+d(typeof(i=null!=(i=n.embedLink||(null!=a?a.embedLink:a))?i:o)===u?i.call(s,{name:"embedLink",hash:{},data:t}):i)+'" title="'+d(typeof(i=null!=(i=n.title||(null!=a?a.title:a))?i:o)===u?i.call(s,{name:"title",hash:{},data:t}):i)+'"><img src="'+d(typeof(i=null!=(i=n.farmURL||(null!=a?a.farmURL:a))?i:o)===u?i.call(s,{name:"farmURL",hash:{},data:t}):i)+'" width="'+d(typeof(i=null!=(i=n.width||(null!=a?a.width:a))?i:o)===u?i.call(s,{name:"width",hash:{},data:t}):i)+'" height="'+d(typeof(i=null!=(i=n.height||(null!=a?a.height:a))?i:o)===u?i.call(s,{name:"height",hash:{},data:t}):i)+'" alt="'+d(typeof(i=null!=(i=n.alt||(null!=a?a.alt:a))?i:o)===u?i.call(s,{name:"alt",hash:{},data:t}):i)+'"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"><\/script>'},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(a,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,n(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-share-bb-code",function(a,e){var l=a.Template.Handlebars.revive({1:function(a,e,l,n,r){var t,s,u=null!=e?e:{};return"by [url="+(null!=(t=l.if.call(u,null!=e?e.authorURL:e,{name:"if",hash:{},fn:a.program(2,r,0),inverse:a.program(4,r,0),data:r}))?t:"")+"]"+a.escapeExpression("function"==typeof(s=null!=(s=l.authorName||(null!=e?e.authorName:e))?s:l.helperMissing)?s.call(u,{name:"authorName",hash:{},data:r}):s)+"[/url]"},2:function(a,e,l,n,r){var t;return a.escapeExpression("function"==typeof(t=null!=(t=l.authorURL||(null!=e?e.authorURL:e))?t:l.helperMissing)?t.call(null!=e?e:{},{name:"authorURL",hash:{},data:r}):t)},4:function(a,e,l,n,r){return"shortURL"},compiler:[7,">= 4.0.0"],main:function(a,e,l,n,r){var t,s,u=null!=e?e:{},i=l.helperMissing,o=a.escapeExpression;return"[url="+o("function"==typeof(s=null!=(s=l.shortURL||(null!=e?e.shortURL:e))?s:i)?s.call(u,{name:"shortURL",hash:{},data:r}):s)+"][img]"+o("function"==typeof(s=null!=(s=l.farmURL||(null!=e?e.farmURL:e))?s:i)?s.call(u,{name:"farmURL",hash:{},data:r}):s)+"[/img][/url][url="+o("function"==typeof(s=null!=(s=l.shortURL||(null!=e?e.shortURL:e))?s:i)?s.call(u,{name:"shortURL",hash:{},data:r}):s)+"]"+o("function"==typeof(s=null!=(s=l.title||(null!=e?e.title:e))?s:i)?s.call(u,{name:"title",hash:{},data:r}):s)+"[/url] "+(null!=(t=l.if.call(u,null!=e?e.authorName:e,{name:"if",hash:{},fn:a.program(1,r,0),inverse:a.noop,data:r}))?t:"")+", "+o((l.intlMessage||e&&e.intlMessage||i).call(u,{name:"intlMessage",hash:{intlName:"share-modal.ON_FLICKR"},data:r}))},useData:!0}),n={};a.Array.each([],function(e){var l=a.Template.get("hermes/"+e);l&&(n[e]=l)}),a.Template.register("hermes/fluid-share-bb-code",function(e,r){return r=r||{},r.partials=r.partials?a.merge(n,r.partials):n,l(e,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-share-modal-mail-pill",function(a,e){var s=a.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(a,e,s,l,t){var r=null!=e?e:{},i=s.helperMissing,n=a.escapeExpression;return'<div class="pill" title="'+n((s.stripTags||e&&e.stripTags||i).call(r,null!=e?e.value:e,{name:"stripTags",hash:{},data:t}))+'">\n\t<span>'+n((s.stripTags||e&&e.stripTags||i).call(r,null!=e?e.value:e,{name:"stripTags",hash:{},data:t}))+'</span>\n\t<span class="remove-tag">\n\t\t<i class="delete-tag" title="Delete"></i>\n\t</span>\n</div>'},useData:!0}),l={};a.Array.each([],function(e){var s=a.Template.get("hermes/"+e);s&&(l[e]=s)}),a.Template.register("hermes/share-modal-mail-pill",function(e,t){return t=t||{},t.partials=t.partials?a.merge(l,t.partials):l,s(e,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-warning",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,s,l){var t;return e.escapeExpression("function"==typeof(t=null!=(t=n.title||(null!=a?a.title:a))?t:n.helperMissing)?t.call(null!=a?a:{},{name:"title",hash:{},data:l}):t)},3:function(e,a,n,s,l){return e.escapeExpression((n.intlMessage||a&&a.intlMessage||n.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"common.OOPS"},data:l}))},compiler:[7,">= 4.0.0"],main:function(e,a,n,s,l){var t,i,r=null!=a?a:{},u=n.helperMissing,m=e.escapeExpression;return'<div class="fluid-warning">\n\t<span class="warning-title">'+(null!=(t=n.if.call(r,null!=a?a.title:a,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l}))?t:"")+'</span>\n\t<br/><br/>\n\t<span class="warning-message">'+m("function"==typeof(i=null!=(i=n.message||(null!=a?a.message:a))?i:u)?i.call(r,{name:"message",hash:{},data:l}):i)+'</span>\n\t<button class="button">'+m((n.intlMessage||a&&a.intlMessage||u).call(r,{name:"intlMessage",hash:{intlName:"common.OK"},data:l}))+"</button>\n</div>"},useData:!0}),s={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(s[a]=n)}),e.Template.register("hermes/fluid-warning",function(a,l){return l=l||{},l.partials=l.partials?e.merge(s,l.partials):s,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-fluid-share-panel-error",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,s,n){var l,t=null!=a?a:{},i=r.helperMissing,o=e.escapeExpression;return'<div class="share-panel-body cancel-share">\n\t<div class="cancel-message">\n\t\t'+o("function"==typeof(l=null!=(l=r.errorMessage||(null!=a?a.errorMessage:a))?l:i)?l.call(t,{name:"errorMessage",hash:{},data:n}):l)+'\n\t</div>\n\n\t<button class="done-sharing mini">'+o((r.intlHTMLMessage||a&&a.intlHTMLMessage||i).call(t,{name:"intlHTMLMessage",hash:{intlName:"common.CANCEL"},data:n}))+"</button>\n</div>"},useData:!0}),s={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(s[a]=r)}),e.Template.register("hermes/fluid-share-panel-error",function(a,n){return n=n||{},n.partials=n.partials?e.merge(s,n.partials):s,r(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});